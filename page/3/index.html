<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>慕言手记</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="慕言手记"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="慕言手记"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="致力于把看似复杂的事情变得简单"><meta property="og:type" content="blog"><meta property="og:title" content="慕言手记"><meta property="og:url" content="http://example.com/"><meta property="og:site_name" content="慕言手记"><meta property="og:description" content="致力于把看似复杂的事情变得简单"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://example.com/img/og_image.png"><meta property="article:author" content="Mu Yan"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com"},"headline":"慕言手记","image":["http://example.com/img/og_image.png"],"author":{"@type":"Person","name":"Mu Yan"},"publisher":{"@type":"Organization","name":"慕言手记","logo":{"@type":"ImageObject","url":"http://example.com/img/logo.svg"}},"description":"致力于把看似复杂的事情变得简单"}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }
          Array
              .from(document.querySelectorAll('.tab-content'))
              .forEach($tab => {
                  $tab.classList.add('is-hidden');
              });
          Array
              .from(document.querySelectorAll('.tabs li'))
              .forEach($tab => {
                  $tab.classList.remove('is-active');
              });
          const $activeTab = document.querySelector(location.hash);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
          const $tabMenu = document.querySelector(`a[href="${location.hash}"]`);
          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.1.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="慕言手记" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item night" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-lightbulb" id="night-icon"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-08-06T01:53:32.000Z" title="2021/8/6 上午9:53:32">2021-08-06</time>发表</span><span class="level-item"><time dateTime="2022-04-17T03:05:11.522Z" title="2022/4/17 上午11:05:11">2022-04-17</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/">编程工具使用总结</a></span><span class="level-item">几秒读完 (大约24个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/08/06/idea%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE%E5%8F%8A%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%A4%87%E5%BF%98%E5%BD%95/">idea常用配置及快捷键备忘录</a></h1><div class="content"><span id="more"></span>

<p>待完善</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Alt+<span class="number">7</span>:查看当前类所有方法列表，快速定位方法</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-08-04T14:36:14.000Z" title="2021/8/4 下午10:36:14">2021-08-04</time>发表</span><span class="level-item"><time dateTime="2022-04-17T03:05:11.532Z" title="2022/4/17 上午11:05:11">2022-04-17</time>更新</span><span class="level-item">1 分钟读完 (大约170个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/08/04/%E5%B7%A5%E4%BD%9C%E5%AE%9E%E9%99%85%E5%BC%80%E5%8F%91%E4%B8%AD%E7%94%A8%E5%88%B0%E7%9A%84%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E5%BD%A2%E5%BC%8F/">工作实际开发中用到的工厂模式形式</a></h1><div class="content"><span id="more"></span>

<h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>工作实际开发中用到的工厂模式形式</p>
<ul>
<li><ul>
<li><ul>
<li><a href="#1_1">1、定义配置文件</a></li>
<li><a href="#2_6">2、改进工厂类</a></li>
<li><a href="#3_34">3、通过工厂调用</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1、定义配置文件"><a href="#1、定义配置文件" class="headerlink" title="1、定义配置文件"></a>1、定义配置文件</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">american=com.itheima.pattern.factory.config_factory.AmericanCoffee</span><br><span class="line">latte=com.itheima.pattern.factory.config_factory.LatteCoffee</span><br></pre></td></tr></table></figure>

<h3 id="2、改进工厂类"><a href="#2、改进工厂类" class="headerlink" title="2、改进工厂类"></a>2、改进工厂类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CoffeeFactory</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String,Coffee&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="type">Properties</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> CoffeeFactory.class.getClassLoader().getResourceAsStream(<span class="string">&quot;bean.properties&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            p.load(is);</span><br><span class="line">            <span class="comment">//遍历Properties集合对象</span></span><br><span class="line">            Set&lt;Object&gt; keys = p.keySet();</span><br><span class="line">            <span class="keyword">for</span> (Object key : keys) &#123;</span><br><span class="line">                <span class="comment">//根据键获取值（全类名）</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">className</span> <span class="operator">=</span> p.getProperty((String) key);</span><br><span class="line">                <span class="comment">//获取字节码对象</span></span><br><span class="line">                <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(className);</span><br><span class="line">                <span class="type">Coffee</span> <span class="variable">obj</span> <span class="operator">=</span> (Coffee) clazz.newInstance();</span><br><span class="line">                map.put((String)key,obj);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Coffee <span class="title function_">createCoffee</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> map.get(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3、通过工厂调用"><a href="#3、通过工厂调用" class="headerlink" title="3、通过工厂调用"></a>3、通过工厂调用</h3></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-08-03T07:31:52.000Z" title="2021/8/3 下午3:31:52">2021-08-03</time>发表</span><span class="level-item"><time dateTime="2022-04-17T03:05:11.526Z" title="2022/4/17 上午11:05:11">2022-04-17</time>更新</span><span class="level-item">2 分钟读完 (大约352个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/08/03/Springboot%E4%B8%ADRestTemplate%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/">Springboot中RestTemplate使用总结</a></h1><div class="content"><span id="more"></span>

<h3 id="1、RestTemplate基本使用"><a href="#1、RestTemplate基本使用" class="headerlink" title="1、RestTemplate基本使用"></a>1、RestTemplate基本使用</h3><p><strong>RestTemplate的POST请求常用的两个主要方法为：</strong><br>1、postForObject()<br>2、postForEntity()</p>
<p><strong>二者的主要区别：</strong><br>postForObject()返回值是HTTP协议的响应体。<br>postForEntity()返回的是ResponseEntity，ResponseEntity是对HTTP响应的封装，除了包含响应体，还包含HTTP状态码、contentType、contentLength、Header等信息。</p>
<p><strong>postForObject的用法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求地址</span></span><br><span class="line"> <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;http://jsonplaceholder.typicode.com/posts&quot;</span>;</span><br><span class="line"> <span class="comment">// 请求头设置,x-www-form-urlencoded格式的数据</span></span><br><span class="line"> <span class="type">HttpHeaders</span> <span class="variable">headers</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpHeaders</span>();</span><br><span class="line"> headers.setContentType(MediaType.APPLICATION_FORM_URLENCODED);</span><br><span class="line"> <span class="comment">//提交参数设置</span></span><br><span class="line"> MultiValueMap&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">LinkedMultiValueMap</span>&lt;&gt;();</span><br><span class="line"> map.add(<span class="string">&quot;title&quot;</span>, <span class="string">&quot;zimug 发布文章第二篇&quot;</span>);</span><br><span class="line"> map.add(<span class="string">&quot;body&quot;</span>, <span class="string">&quot;zimug 发布文章第二篇 测试内容&quot;</span>);</span><br><span class="line"> <span class="comment">// 组装请求体</span></span><br><span class="line"> HttpEntity&lt;MultiValueMap&lt;String, String&gt;&gt; request = <span class="keyword">new</span> <span class="title class_">HttpEntity</span>&lt;MultiValueMap&lt;String, String&gt;&gt;(map, headers);</span><br><span class="line"> <span class="comment">// 发送post请求，并打印结果，以String类型接收响应结果JSON字符串</span></span><br><span class="line"> <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> restTemplate.postForObject(url, request, String.class);</span><br><span class="line"> System.out.println(result);</span><br></pre></td></tr></table></figure>

<p><strong>postForEntity的用法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">HttpHeaders</span> <span class="variable">headers</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpHeaders</span>();</span><br><span class="line"><span class="type">MediaType</span> <span class="variable">type</span> <span class="operator">=</span> MediaType.parseMediaType(<span class="string">&quot;multipart/form-data&quot;</span>);</span><br><span class="line"><span class="comment">// 设置请求的格式类型</span></span><br><span class="line">headers.setContentType(type);</span><br><span class="line"><span class="type">FileSystemResource</span> <span class="variable">fileSystemResource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileSystemResource</span>(path);</span><br><span class="line">MultiValueMap&lt;String, Object&gt; form = <span class="keyword">new</span> <span class="title class_">LinkedMultiValueMap</span>&lt;&gt;();</span><br><span class="line">form.add(<span class="string">&quot;name&quot;</span>, fileSystemResource);</span><br><span class="line">HttpEntity&lt;MultiValueMap&lt;String, Object&gt;&gt; files = <span class="keyword">new</span> <span class="title class_">HttpEntity</span>&lt;&gt;(form, headers);</span><br><span class="line">ResponseEntity&lt;TopicFileResponse&gt; responseResponseEntity = restTemplate.postForEntity(url, files, TopicFileResponse.class);</span><br><span class="line"><span class="type">TopicFileResponse</span> <span class="variable">body</span> <span class="operator">=</span> responseResponseEntity.getBody();</span><br><span class="line"><span class="keyword">return</span> body;</span><br></pre></td></tr></table></figure>

<p>参考博客<br>【1】<a target="_blank" rel="noopener" href="http://www.zimug.com/java/spring/%E7%B2%BE%E8%AE%B2resttemplate%E7%AC%AC4%E7%AF%87-post%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3/.html">精讲RestTemplate第4篇-POST请求方法使用详解</a><br>【2】<a target="_blank" rel="noopener" href="https://github.com/vieyahn2017/javaway/issues/53">使用restTemplate上传文件MultipartFile</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-08-01T08:07:47.000Z" title="2021/8/1 下午4:07:47">2021-08-01</time>发表</span><span class="level-item"><time dateTime="2022-04-17T03:05:11.533Z" title="2022/4/17 上午11:05:11">2022-04-17</time>更新</span><span class="level-item">6 分钟读完 (大约922个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/08/01/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E6%80%BB%E7%BB%93/">设计模式总结</a></h1><div class="content"><span id="more"></span>

<h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>设计模式总结</p>
<ul>
<li><ul>
<li><a href="#_3">一、设计模式七大原则</a></li>
<li><a href="#_30">二、类图的关系</a></li>
<li><a href="#_51">三、设计模式</a></li>
<li><ul>
<li><a href="#1_52">1、创建型设计模式</a></li>
<li><a href="#2_54">2、结构型设计模式</a></li>
<li><a href="#3_56">3、行为型设计模式</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="一、设计模式七大原则"><a href="#一、设计模式七大原则" class="headerlink" title="一、设计模式七大原则"></a>一、设计模式七大原则</h2><p><strong>1、单一职责原则</strong><br>  对于类来说，一个类只负责一项职责。若一个类负责多个职责，则当一个职责发生变化，可能影响另一个职责功能正常使用<br><strong>2、接口隔离原则（Interface Segregation Principle）</strong><br>  一个类对另一个类的依赖应该建立在最小数量接口上，譬如类A 依赖（参数传递） 类B，而类B要实现接口1的全部方法，此时，接口1应该建立最小数量接口。若过多，则需要拆分。减少浪费。<br><strong>3、依赖倒置原则（Dependence Inversion Principle）</strong><br>  细节依赖抽象，而不是抽象依赖细节。中心思想上面向接口编程<br><strong>依赖关系传递的三种方式：</strong><br>  1）接口传递<br>  2）构造方法传递<br>  3）setter传递<br><strong>4、里氏替换原则（Lisko Substitution Principle）</strong><br>  主要针对继承<br>  尽量不要修改父类的方法的功能<br>  如要修改，可以通过组合，聚合，依赖来解决问题。<br><strong>5、开闭原则（Open Closed Principle）</strong>【重要，基础】<br>  模块和功能对扩展开放（对提供方），对修改关闭（对使用方）。用抽象构建框架，用实现扩展细节。<br><strong>6、迪米特原则（Demeter Principle）</strong><br>  最小知道原则<strong>降底</strong>类之间的耦合关系。<br>  直接朋友：成员变量，方法参数，方法返回值。B类作为A类的成员变量，B类在A类的方法作为参数传递，B类作为Al类某方法的返回值。<br>  不是直接朋友：局部变量。例如， B b &#x3D; new B(); 存在于A类中。B在方法内部作为参数返回<br><strong>7、合成复用原则（Composite Reuse Principle）</strong><br>  尽量使用合成或聚合的方式，而不是使用继承。<br><strong>设计核心思想</strong><br>  1、找出<strong>可能发生变化</strong>的部分，将其<strong>独立</strong>出来，不要和那些不需要变化的代码混合在一起<br>  2、<strong>针对接口</strong>编程，而不是针对实现编程<br>  3、为交互对象之间的<strong>松耦合</strong>而努力。</p>
<h2 id="二、类图的关系"><a href="#二、类图的关系" class="headerlink" title="二、类图的关系"></a>二、类图的关系</h2><p><strong>1、依赖关系（Dependency）</strong><br>类的成员属性、方法参数、返回类型等等</p>
<p><strong>2、泛化关系-继承-依赖的特例（Generalization）</strong></p>
<p><strong>3、实现关系-依赖的特例（Realization）</strong></p>
<p><strong>4、关联关系（Association）</strong><br>一对一：单向、双向</p>
<p><strong>5、聚合关系-关联特例（Aggregation）</strong><br>电脑和其配件，可以拆分</p>
<p><strong>6、组合关系（composition）</strong><br>整体和部分，但是不可分离，比如人和脑袋。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> IDcard idcard ; <span class="comment">//聚合关系,但是级联关系，变为同生共死的关系，则为组合</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">Head</span> <span class="variable">head</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Head</span> (); <span class="comment">//组合关系</span></span><br></pre></td></tr></table></figure>

<h2 id="三、设计模式"><a href="#三、设计模式" class="headerlink" title="三、设计模式"></a>三、设计模式</h2><h3 id="1、创建型设计模式"><a href="#1、创建型设计模式" class="headerlink" title="1、创建型设计模式"></a>1、创建型设计模式</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_28809019/article/details/119488530">创建型设计模式总结</a></p>
<h3 id="2、结构型设计模式"><a href="#2、结构型设计模式" class="headerlink" title="2、结构型设计模式"></a>2、结构型设计模式</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_28809019/article/details/119488883">结构型设计模式总结</a></p>
<h3 id="3、行为型设计模式"><a href="#3、行为型设计模式" class="headerlink" title="3、行为型设计模式"></a>3、行为型设计模式</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_28809019/article/details/119488973">行为型设计模式总结</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-07-31T13:43:36.000Z" title="2021/7/31 下午9:43:36">2021-07-31</time>发表</span><span class="level-item"><time dateTime="2022-04-17T03:05:11.528Z" title="2022/4/17 上午11:05:11">2022-04-17</time>更新</span><span class="level-item">几秒读完 (大约73个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/07/31/docker%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4/">docker网络配置命令</a></h1><div class="content"><span id="more"></span>

<p>1、查看网桥的配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network ls</span><br></pre></td></tr></table></figure>

<p>2、创建自定义网桥</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker create ems</span><br><span class="line">docker create -d bridge ems</span><br></pre></td></tr></table></figure>

<p>3、启动时指定网桥</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8080:8080 --network ems --name=mytomcat tomcat:8</span><br></pre></td></tr></table></figure>

<p>4、删除网桥</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network rm aa</span><br></pre></td></tr></table></figure>

<p>5 、查看网桥网络配置信息</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect dangdang</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-07-31T01:54:29.000Z" title="2021/7/31 上午9:54:29">2021-07-31</time>发表</span><span class="level-item"><time dateTime="2022-04-17T03:05:11.534Z" title="2022/4/17 上午11:05:11">2022-04-17</time>更新</span><span class="level-item">3 分钟读完 (大约417个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/07/31/Freemarker%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/">Freemarker的基本使用</a></h1><div class="content"><span id="more"></span>

<h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>Freemarker的基本使用</p>
<ul>
<li><ul>
<li><a href="#_1">基本指令</a></li>
<li><ul>
<li><a href="#1FTL_2">1、FTL指令</a></li>
<li><ul>
<li><a href="#11_assign_3">1.1 assign指令</a></li>
<li><a href="#12_include_20">1.2 include指令</a></li>
<li><a href="#13_if_25">1.3 if指令</a></li>
<li><a href="#14_list_34">1.4 list指令</a></li>
</ul>
</li>
<li><a href="#2_48">2、内置函数</a></li>
<li><ul>
<li><a href="#21_size_49">2.1 获取集合大小size</a></li>
<li><a href="#22_json_56">2.2 json字符串转对象</a></li>
<li><a href="#23__63">2.3 日期格式化</a></li>
</ul>
</li>
<li><a href="#3_70">3、空值处理</a></li>
<li><ul>
<li><a href="#31___71">3.1 判断变量是否存在 “??”</a></li>
<li><a href="#32___79">3.2 变量不存在使用默认值 “!”</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="基本指令"><a href="#基本指令" class="headerlink" title="基本指令"></a>基本指令</h2><h3 id="1、FTL指令"><a href="#1、FTL指令" class="headerlink" title="1、FTL指令"></a>1、FTL指令</h3><h4 id="1-1-assign指令"><a href="#1-1-assign指令" class="headerlink" title="1.1 assign指令"></a>1.1 assign指令</h4><p>用于在模板中定义一个变量，可定义一个简单变量，定义对象，定义数组</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;#--定义一个简单变量--&gt;</span><br><span class="line"> &lt;#assign msg=<span class="string">&quot;Hello Word!&quot;</span>&gt;</span><br><span class="line"> $&#123;msg&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;#--定义对象--&gt;</span><br><span class="line"> &lt;#assign user=&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;李四&quot;</span>,<span class="string">&quot;age&quot;</span>:<span class="number">18</span>,<span class="string">&quot;address&quot;</span>:<span class="string">&quot;北京&quot;</span>&#125; &gt; </span><br><span class="line"> $&#123;user.name&#125;---$&#123;user.age&#125;---$&#123;user.address&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;#--定义数组--&gt;</span><br><span class="line"> &lt;#assign myList=[<span class="string">&quot;唐人街探案3&quot;</span>,<span class="string">&quot;我和我的祖国&quot;</span>]&gt; </span><br><span class="line"> $&#123;myList[<span class="number">0</span>]&#125;---$&#123;myList[<span class="number">1</span>]&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-2-include指令"><a href="#1-2-include指令" class="headerlink" title="1.2 include指令"></a>1.2 include指令</h4><p>此指令用于模板文件的嵌套</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;#include <span class="string">&quot;head.ftl&quot;</span>&gt;</span><br></pre></td></tr></table></figure>

<h4 id="1-3-if指令"><a href="#1-3-if指令" class="headerlink" title="1.3 if指令"></a>1.3 if指令</h4><p>if指令用于判断</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;#<span class="keyword">if</span> work==<span class="literal">true</span>&gt;</span><br><span class="line">    努力工作</span><br><span class="line">    &lt;#<span class="keyword">else</span>&gt;</span><br><span class="line">    上班摸鱼</span><br><span class="line">&lt;/#<span class="keyword">if</span>&gt;</span><br></pre></td></tr></table></figure>

<h4 id="1-4-list指令"><a href="#1-4-list指令" class="headerlink" title="1.4 list指令"></a>1.4 list指令</h4><p>list指令用于循环，分两种形式<br>1、第一种</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;#list <span class="number">0.</span><span class="number">.10</span> as num&gt;</span><br><span class="line">    $&#123;num&#125;</span><br><span class="line">&lt;/#list&gt;</span><br></pre></td></tr></table></figure>

<p>2、第二种</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;#list taskList as task&gt;</span><br><span class="line">   $&#123;task_index +<span class="number">1</span>&#125;---$&#123;task.taskType&#125;---$&#123;task.priority&#125;---$&#123;task.executeTime&#125; &lt;br&gt;</span><br><span class="line">&lt;/#list&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2、内置函数"><a href="#2、内置函数" class="headerlink" title="2、内置函数"></a>2、内置函数</h3><h4 id="2-1-获取集合大小size"><a href="#2-1-获取集合大小size" class="headerlink" title="2.1 获取集合大小size"></a>2.1 获取集合大小size</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;#list taskList as task&gt;</span><br><span class="line">    $&#123;task_index +<span class="number">1</span>&#125;---$&#123;task.taskType&#125;---$&#123;task.priority&#125;---$&#123;task.executeTime&#125; &lt;br&gt;</span><br><span class="line">&lt;/#list&gt;</span><br><span class="line">总共有$&#123;taskList?size&#125;个任务</span><br></pre></td></tr></table></figure>

<h4 id="2-2-json字符串转对象"><a href="#2-2-json字符串转对象" class="headerlink" title="2.2 json字符串转对象"></a>2.2 json字符串转对象</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;#assign taskStr=<span class="string">&quot;&#123;&#x27;taskType&#x27;:1002,&#x27;priority&#x27;:5&#125;&quot;</span>&gt;</span><br><span class="line">&lt;#--$&#123;taskStr.taskType&#125;--&gt;</span><br><span class="line">&lt;#assign task=taskStr?eval&gt;</span><br><span class="line">$&#123;task.taskType&#125;--$&#123;task.priority&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-3-日期格式化"><a href="#2-3-日期格式化" class="headerlink" title="2.3 日期格式化"></a>2.3 日期格式化</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">日期：$&#123;today?date&#125; &lt;br&gt;</span><br><span class="line">时间:$&#123;today?time&#125; &lt;br&gt;</span><br><span class="line">日期+时间:$&#123;today?datetime&#125; &lt;br&gt;</span><br><span class="line">自定义格式:$&#123;today?string(<span class="string">&#x27;yyyy年-MM月-dd日&#x27;</span>)&#125; &lt;br&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3、空值处理"><a href="#3、空值处理" class="headerlink" title="3、空值处理"></a>3、空值处理</h3><h4 id="3-1-判断变量是否存在-“-”"><a href="#3-1-判断变量是否存在-“-”" class="headerlink" title="3.1 判断变量是否存在 “??”"></a>3.1 判断变量是否存在 “??”</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;#<span class="keyword">if</span> aaa??&gt;</span><br><span class="line">    变量aaa存在 值为$&#123;aaa&#125;    </span><br><span class="line">&lt;#<span class="keyword">else</span>&gt;</span><br><span class="line">    变量aaa不存在</span><br><span class="line">&lt;/#<span class="keyword">if</span>&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-2-变量不存在使用默认值-“-”"><a href="#3-2-变量不存在使用默认值-“-”" class="headerlink" title="3.2 变量不存在使用默认值 “!”"></a>3.2 变量不存在使用默认值 “!”</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;aaa ! <span class="string">&#x27;aaa不存在显示的默认值&#x27;</span>&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-07-31T01:44:25.000Z" title="2021/7/31 上午9:44:25">2021-07-31</time>发表</span><span class="level-item"><time dateTime="2022-04-17T03:05:11.537Z" title="2022/4/17 上午11:05:11">2022-04-17</time>更新</span><span class="level-item">几秒读完 (大约4个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/07/31/MyCat%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/">MyCat的基本使用总结</a></h1><div class="content"><span id="more"></span>

<p>待更新</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-07-31T01:42:52.000Z" title="2021/7/31 上午9:42:52">2021-07-31</time>发表</span><span class="level-item"><time dateTime="2022-04-17T03:05:11.543Z" title="2022/4/17 上午11:05:11">2022-04-17</time>更新</span><span class="level-item">5 分钟读完 (大约675个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/07/31/Sharding-JDBC%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D%E4%BD%BF%E7%94%A8/">Sharding-JDBC的基本介绍使用</a></h1><div class="content"><span id="more"></span>

<h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>Sharding-JDBC的基本介绍使用</p>
<ul>
<li><ul>
<li><ul>
<li><a href="#1_1">1、基本概念介绍</a></li>
<li><ul>
<li><a href="#11__2">1.1 逻辑表</a></li>
<li><a href="#12__4">1.2 真实表</a></li>
<li><a href="#13__6">1.3 数据节点</a></li>
<li><a href="#14__8">1.4 分配策略</a></li>
</ul>
</li>
<li><a href="#2_20">2、使用步骤</a></li>
<li><ul>
<li><a href="#1pom_21">1、在pom文件中引入依赖</a></li>
<li><a href="#2sql_23">2、分库分表sql脚本导入</a></li>
<li><a href="#3_25">3、数据源整合</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1、基本概念介绍"><a href="#1、基本概念介绍" class="headerlink" title="1、基本概念介绍"></a>1、基本概念介绍</h3><h4 id="1-1-逻辑表"><a href="#1-1-逻辑表" class="headerlink" title="1.1 逻辑表"></a>1.1 逻辑表</h4><p>是对于水平拆分的数据库（表）的同一类表的总称。例如：订单数据根据主键尾数拆分为10张表，分别是t_order_0到t_order_9，他们的逻辑表可以表示为t_order，在应用程序中操作的是逻辑表。</p>
<h4 id="1-2-真实表"><a href="#1-2-真实表" class="headerlink" title="1.2 真实表"></a>1.2 真实表</h4><p>在分片的数据库中真实存在的物理表。即上个示例中的t_order_0到t_order_9。</p>
<h4 id="1-3-数据节点"><a href="#1-3-数据节点" class="headerlink" title="1.3 数据节点"></a>1.3 数据节点</h4><p>数据分片的最小单元, 由数据源名称和数据表组成 例如：db_0.t_order_0。 表示 数据库db_0下名称为t_order_0的表</p>
<h4 id="1-4-分配策略"><a href="#1-4-分配策略" class="headerlink" title="1.4 分配策略"></a>1.4 分配策略</h4><p>以下五种分配策略：<br><strong>StandardShardingStrategy</strong>：标准分片策略。提供对SQL语句中的&#x3D;, IN和BETWEEN AND的分片操作支持。只支持单分片键，提供PreciseShardingAlgorithm和RangeShardingAlgorithm两个分片算法。</p>
<p><strong>InlineShardingStrategy</strong>：Inline表达式分片策略。使用Groovy的Inline表达式，提供对SQL语句中的&#x3D;和IN的分片操作支持。</p>
<p><strong>HintShardingStrategy</strong>：通过Hint而非SQL解析的方式分片的策略。</p>
<p><strong>NoneShardingStrategy</strong>：不分片的策略</p>
<p><strong>自定义分片策略</strong></p>
<h3 id="2、使用步骤"><a href="#2、使用步骤" class="headerlink" title="2、使用步骤"></a>2、使用步骤</h3><h4 id="1、在pom文件中引入依赖"><a href="#1、在pom文件中引入依赖" class="headerlink" title="1、在pom文件中引入依赖"></a>1、在pom文件中引入依赖</h4><h4 id="2、分库分表sql脚本导入"><a href="#2、分库分表sql脚本导入" class="headerlink" title="2、分库分表sql脚本导入"></a>2、分库分表sql脚本导入</h4><h4 id="3、数据源整合"><a href="#3、数据源整合" class="headerlink" title="3、数据源整合"></a>3、数据源整合</h4><p>以往我们都是配置唯一数据源，但是现在要连接多个数据库，所以要配置多个数据源<br>与以往不同部分的配置<br><strong>1）配置yml文件</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">shardingsphere:</span></span><br><span class="line">       <span class="attr">datasource:</span></span><br><span class="line">           <span class="attr">ds0:</span></span><br><span class="line">               <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">               <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">               <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">               <span class="attr">url:</span> <span class="string">jdbc:mysql://192.168.201.129:3306/schedule0?serverTimezone=Asia/Shanghai</span></span><br><span class="line">               <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">           <span class="attr">ds1:</span></span><br><span class="line">               <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">               <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">               <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">               <span class="attr">url:</span> <span class="string">jdbc:mysql://192.168.201.129:3306/schedule1?serverTimezone=Asia/Shanghai</span></span><br><span class="line">               <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">           <span class="attr">names:</span> <span class="string">ds0,ds1</span></span><br></pre></td></tr></table></figure>

<p><strong>2）修改启动配置类</strong><br>在启动类：ScheduleApplication 上将系统默认spring的数据源自动配置类排除</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@SpringBootApplication</span></span><br><span class="line"><span class="meta">@SpringBootApplication(exclude = &#123;DataSourceAutoConfiguration.class&#125;)</span></span><br><span class="line">......</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ScheduleApplication</span> &#123;</span><br><span class="line">    ..........</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3）集成shardingDataSource数据源</strong><br>创建MybatisPlusShardingConfiguration 配置类，将shardingDataSource数据源集成到mybatis-plus中去</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *mybatis-plus 使用sharding-jdbc数据源问题</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@AutoConfigureAfter(DataSource.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusShardingConfiguration</span> &#123;</span><br><span class="line">    <span class="comment">//获取sharding 数据源</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DataSource dataSource;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisSqlSessionFactoryBean <span class="title function_">mybatisSqlSessionFactoryBean</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MybatisSqlSessionFactoryBean</span> <span class="variable">mysqlplus</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisSqlSessionFactoryBean</span>();</span><br><span class="line">        mysqlplus.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> mysqlplus;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>4）完善yml分配策略</strong></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sharding:</span></span><br><span class="line">      <span class="attr">tables:</span></span><br><span class="line">        <span class="attr">taskinfo:</span></span><br><span class="line">          <span class="attr">actual-data-nodes:</span> <span class="string">ds$-&gt;&#123;0..1&#125;.taskinfo_$-&gt;&#123;0..1&#125;</span></span><br><span class="line">          <span class="attr">key-generator:</span> <span class="comment">#主键生成策略</span></span><br><span class="line">            <span class="attr">column:</span> <span class="string">task_id</span></span><br><span class="line">            <span class="attr">type:</span> <span class="string">SNOWFLAKE</span></span><br><span class="line">          <span class="attr">database-strategy:</span>  <span class="comment">#分库策略</span></span><br><span class="line">            <span class="attr">inline:</span></span><br><span class="line">              <span class="attr">sharding-column:</span> <span class="string">task_type</span></span><br><span class="line">              <span class="attr">algorithm-expression:</span> <span class="string">ds$-&gt;&#123;task_type</span> <span class="string">%</span> <span class="number">2</span><span class="string">&#125;</span></span><br><span class="line">          <span class="attr">table-strategy:</span> <span class="comment">#分表策略</span></span><br><span class="line">            <span class="attr">inline:</span></span><br><span class="line">              <span class="attr">sharding-column:</span> <span class="string">priority</span> </span><br><span class="line">              <span class="attr">algorithm-expression:</span> <span class="string">taskinfo_$-&gt;&#123;priority</span> <span class="string">%</span> <span class="number">2</span><span class="string">&#125;</span></span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-07-30T15:28:08.000Z" title="2021/7/30 下午11:28:08">2021-07-30</time>发表</span><span class="level-item"><time dateTime="2022-04-17T03:05:11.546Z" title="2022/4/17 上午11:05:11">2022-04-17</time>更新</span><span class="level-item">1 小时读完 (大约8218个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/07/30/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/">数据库分库分表</a></h1><div class="content"><span id="more"></span>

<h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>数据库分库分表</p>
<ul>
<li><ul>
<li><a href="#1_1">1、数据库分表的基本介绍</a></li>
<li><ul>
<li><a href="#11__2">1.1 为什么分库分表</a></li>
<li><a href="#12___10">1.2 数据库 库表的拆分方式</a></li>
</ul>
</li>
<li><a href="#2_39">2、两种技术模式的基本介绍</a></li>
<li><ul>
<li><a href="#21__40">2.1 分库分表的技术模式</a></li>
<li><a href="#21_ShardingJDBC_45">2.1 Sharding-JDBC</a></li>
<li><a href="#22_MyCat_47">2.2 MyCat</a></li>
</ul>
</li>
<li><a href="#3_50">3、数据库表结构的自动生成</a></li>
<li><ul>
<li><a href="#31_51">3.1为什么要使用数据表自动生成</a></li>
<li><a href="#32_Freemarker_54">3.2 Freemarker的基本使用</a></li>
<li><a href="#33__56">3.3 表结构自动生成步骤</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="1、数据库分表的基本介绍"><a href="#1、数据库分表的基本介绍" class="headerlink" title="1、数据库分表的基本介绍"></a>1、数据库分表的基本介绍</h2><h3 id="1-1-为什么分库分表"><a href="#1-1-为什么分库分表" class="headerlink" title="1.1 为什么分库分表"></a>1.1 为什么分库分表</h3><p>一般mysql单表存储数据量小于1千万左右的时候，它的读写性能是最好的。<br>但是当业务发展到一定程度，数据增长到一定程度的时候，我们就会发现为什么查询速度越来越慢了，甚至还会出现数据库挂了等其他一系列问题。<br>此时我们就需要采取一些方案来解决这些问题，一般如下三种：<br>1、分库分表<br>2、读写分离<br>3、利用NoSql</p>
<h3 id="1-2-数据库-库表的拆分方式"><a href="#1-2-数据库-库表的拆分方式" class="headerlink" title="1.2 数据库 库表的拆分方式"></a>1.2 数据库 库表的拆分方式</h3><p>数据库拆分方式有两种：垂直拆分和水平拆分<br>1）垂直拆分<br>垂直拆分的核心理念是专库专用。拆分之后，则是按照业务将表进行归类，分布到不同的数据库中，从而将压力分散至不同的数据库。</p>
<style>#mermaid-svg-s56ijih48UGIAIvv .label{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);fill:#333;color:#333}#mermaid-svg-s56ijih48UGIAIvv .label text{fill:#333}#mermaid-svg-s56ijih48UGIAIvv .node rect,#mermaid-svg-s56ijih48UGIAIvv .node circle,#mermaid-svg-s56ijih48UGIAIvv .node ellipse,#mermaid-svg-s56ijih48UGIAIvv .node polygon,#mermaid-svg-s56ijih48UGIAIvv .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-svg-s56ijih48UGIAIvv .node .label{text-align:center;fill:#333}#mermaid-svg-s56ijih48UGIAIvv .node.clickable{cursor:pointer}#mermaid-svg-s56ijih48UGIAIvv .arrowheadPath{fill:#333}#mermaid-svg-s56ijih48UGIAIvv .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-svg-s56ijih48UGIAIvv .flowchart-link{stroke:#333;fill:none}#mermaid-svg-s56ijih48UGIAIvv .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-svg-s56ijih48UGIAIvv .edgeLabel rect{opacity:0.9}#mermaid-svg-s56ijih48UGIAIvv .edgeLabel span{color:#333}#mermaid-svg-s56ijih48UGIAIvv .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-svg-s56ijih48UGIAIvv .cluster text{fill:#333}#mermaid-svg-s56ijih48UGIAIvv div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-svg-s56ijih48UGIAIvv .actor{stroke:#ccf;fill:#ECECFF}#mermaid-svg-s56ijih48UGIAIvv text.actor>tspan{fill:#000;stroke:none}#mermaid-svg-s56ijih48UGIAIvv .actor-line{stroke:grey}#mermaid-svg-s56ijih48UGIAIvv .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333}#mermaid-svg-s56ijih48UGIAIvv .messageLine1{stroke-width:1.5;stroke-dasharray:2, 2;stroke:#333}#mermaid-svg-s56ijih48UGIAIvv #arrowhead path{fill:#333;stroke:#333}#mermaid-svg-s56ijih48UGIAIvv .sequenceNumber{fill:#fff}#mermaid-svg-s56ijih48UGIAIvv #sequencenumber{fill:#333}#mermaid-svg-s56ijih48UGIAIvv #crosshead path{fill:#333;stroke:#333}#mermaid-svg-s56ijih48UGIAIvv .messageText{fill:#333;stroke:#333}#mermaid-svg-s56ijih48UGIAIvv .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-svg-s56ijih48UGIAIvv .labelText,#mermaid-svg-s56ijih48UGIAIvv .labelText>tspan{fill:#000;stroke:none}#mermaid-svg-s56ijih48UGIAIvv .loopText,#mermaid-svg-s56ijih48UGIAIvv .loopText>tspan{fill:#000;stroke:none}#mermaid-svg-s56ijih48UGIAIvv .loopLine{stroke-width:2px;stroke-dasharray:2, 2;stroke:#ccf;fill:#ccf}#mermaid-svg-s56ijih48UGIAIvv .note{stroke:#aa3;fill:#fff5ad}#mermaid-svg-s56ijih48UGIAIvv .noteText,#mermaid-svg-s56ijih48UGIAIvv .noteText>tspan{fill:#000;stroke:none}#mermaid-svg-s56ijih48UGIAIvv .activation0{fill:#f4f4f4;stroke:#666}#mermaid-svg-s56ijih48UGIAIvv .activation1{fill:#f4f4f4;stroke:#666}#mermaid-svg-s56ijih48UGIAIvv .activation2{fill:#f4f4f4;stroke:#666}#mermaid-svg-s56ijih48UGIAIvv .mermaid-main-font{font-family:"trebuchet ms", verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-s56ijih48UGIAIvv .section{stroke:none;opacity:0.2}#mermaid-svg-s56ijih48UGIAIvv .section0{fill:rgba(102,102,255,0.49)}#mermaid-svg-s56ijih48UGIAIvv .section2{fill:#fff400}#mermaid-svg-s56ijih48UGIAIvv .section1,#mermaid-svg-s56ijih48UGIAIvv .section3{fill:#fff;opacity:0.2}#mermaid-svg-s56ijih48UGIAIvv .sectionTitle0{fill:#333}#mermaid-svg-s56ijih48UGIAIvv .sectionTitle1{fill:#333}#mermaid-svg-s56ijih48UGIAIvv .sectionTitle2{fill:#333}#mermaid-svg-s56ijih48UGIAIvv .sectionTitle3{fill:#333}#mermaid-svg-s56ijih48UGIAIvv .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-s56ijih48UGIAIvv .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-svg-s56ijih48UGIAIvv .grid .tick text{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-s56ijih48UGIAIvv .grid path{stroke-width:0}#mermaid-svg-s56ijih48UGIAIvv .today{fill:none;stroke:red;stroke-width:2px}#mermaid-svg-s56ijih48UGIAIvv .task{stroke-width:2}#mermaid-svg-s56ijih48UGIAIvv .taskText{text-anchor:middle;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-s56ijih48UGIAIvv .taskText:not([font-size]){font-size:11px}#mermaid-svg-s56ijih48UGIAIvv .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-s56ijih48UGIAIvv .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-svg-s56ijih48UGIAIvv .task.clickable{cursor:pointer}#mermaid-svg-s56ijih48UGIAIvv .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-svg-s56ijih48UGIAIvv .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-svg-s56ijih48UGIAIvv .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-svg-s56ijih48UGIAIvv .taskText0,#mermaid-svg-s56ijih48UGIAIvv .taskText1,#mermaid-svg-s56ijih48UGIAIvv .taskText2,#mermaid-svg-s56ijih48UGIAIvv .taskText3{fill:#fff}#mermaid-svg-s56ijih48UGIAIvv .task0,#mermaid-svg-s56ijih48UGIAIvv .task1,#mermaid-svg-s56ijih48UGIAIvv .task2,#mermaid-svg-s56ijih48UGIAIvv .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-svg-s56ijih48UGIAIvv .taskTextOutside0,#mermaid-svg-s56ijih48UGIAIvv .taskTextOutside2{fill:#000}#mermaid-svg-s56ijih48UGIAIvv .taskTextOutside1,#mermaid-svg-s56ijih48UGIAIvv .taskTextOutside3{fill:#000}#mermaid-svg-s56ijih48UGIAIvv .active0,#mermaid-svg-s56ijih48UGIAIvv .active1,#mermaid-svg-s56ijih48UGIAIvv .active2,#mermaid-svg-s56ijih48UGIAIvv .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-svg-s56ijih48UGIAIvv .activeText0,#mermaid-svg-s56ijih48UGIAIvv .activeText1,#mermaid-svg-s56ijih48UGIAIvv .activeText2,#mermaid-svg-s56ijih48UGIAIvv .activeText3{fill:#000 !important}#mermaid-svg-s56ijih48UGIAIvv .done0,#mermaid-svg-s56ijih48UGIAIvv .done1,#mermaid-svg-s56ijih48UGIAIvv .done2,#mermaid-svg-s56ijih48UGIAIvv .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-svg-s56ijih48UGIAIvv .doneText0,#mermaid-svg-s56ijih48UGIAIvv .doneText1,#mermaid-svg-s56ijih48UGIAIvv .doneText2,#mermaid-svg-s56ijih48UGIAIvv .doneText3{fill:#000 !important}#mermaid-svg-s56ijih48UGIAIvv .crit0,#mermaid-svg-s56ijih48UGIAIvv .crit1,#mermaid-svg-s56ijih48UGIAIvv .crit2,#mermaid-svg-s56ijih48UGIAIvv .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-svg-s56ijih48UGIAIvv .activeCrit0,#mermaid-svg-s56ijih48UGIAIvv .activeCrit1,#mermaid-svg-s56ijih48UGIAIvv .activeCrit2,#mermaid-svg-s56ijih48UGIAIvv .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-svg-s56ijih48UGIAIvv .doneCrit0,#mermaid-svg-s56ijih48UGIAIvv .doneCrit1,#mermaid-svg-s56ijih48UGIAIvv .doneCrit2,#mermaid-svg-s56ijih48UGIAIvv .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-svg-s56ijih48UGIAIvv .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-svg-s56ijih48UGIAIvv .milestoneText{font-style:italic}#mermaid-svg-s56ijih48UGIAIvv .doneCritText0,#mermaid-svg-s56ijih48UGIAIvv .doneCritText1,#mermaid-svg-s56ijih48UGIAIvv .doneCritText2,#mermaid-svg-s56ijih48UGIAIvv .doneCritText3{fill:#000 !important}#mermaid-svg-s56ijih48UGIAIvv .activeCritText0,#mermaid-svg-s56ijih48UGIAIvv .activeCritText1,#mermaid-svg-s56ijih48UGIAIvv .activeCritText2,#mermaid-svg-s56ijih48UGIAIvv .activeCritText3{fill:#000 !important}#mermaid-svg-s56ijih48UGIAIvv .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-s56ijih48UGIAIvv g.classGroup text{fill:#9370db;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-svg-s56ijih48UGIAIvv g.classGroup text .title{font-weight:bolder}#mermaid-svg-s56ijih48UGIAIvv g.clickable{cursor:pointer}#mermaid-svg-s56ijih48UGIAIvv g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-svg-s56ijih48UGIAIvv g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-svg-s56ijih48UGIAIvv .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-svg-s56ijih48UGIAIvv .classLabel .label{fill:#9370db;font-size:10px}#mermaid-svg-s56ijih48UGIAIvv .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-svg-s56ijih48UGIAIvv .dashed-line{stroke-dasharray:3}#mermaid-svg-s56ijih48UGIAIvv #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-s56ijih48UGIAIvv #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-s56ijih48UGIAIvv #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-svg-s56ijih48UGIAIvv #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-svg-s56ijih48UGIAIvv #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-s56ijih48UGIAIvv #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-s56ijih48UGIAIvv #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-s56ijih48UGIAIvv #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-s56ijih48UGIAIvv .commit-id,#mermaid-svg-s56ijih48UGIAIvv .commit-msg,#mermaid-svg-s56ijih48UGIAIvv .branch-label{fill:lightgrey;color:lightgrey;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-s56ijih48UGIAIvv .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-s56ijih48UGIAIvv .slice{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-s56ijih48UGIAIvv g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-s56ijih48UGIAIvv g.stateGroup text{fill:#9370db;fill:#333;stroke:none;font-size:10px}#mermaid-svg-s56ijih48UGIAIvv g.statediagram-cluster .cluster-label text{fill:#333}#mermaid-svg-s56ijih48UGIAIvv g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-svg-s56ijih48UGIAIvv g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-svg-s56ijih48UGIAIvv g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-svg-s56ijih48UGIAIvv .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-svg-s56ijih48UGIAIvv .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-svg-s56ijih48UGIAIvv .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-svg-s56ijih48UGIAIvv .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-svg-s56ijih48UGIAIvv .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-svg-s56ijih48UGIAIvv .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.7}#mermaid-svg-s56ijih48UGIAIvv .edgeLabel text{fill:#333}#mermaid-svg-s56ijih48UGIAIvv .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-s56ijih48UGIAIvv .node circle.state-start{fill:black;stroke:black}#mermaid-svg-s56ijih48UGIAIvv .node circle.state-end{fill:black;stroke:white;stroke-width:1.5}#mermaid-svg-s56ijih48UGIAIvv #statediagram-barbEnd{fill:#9370db}#mermaid-svg-s56ijih48UGIAIvv .statediagram-cluster rect{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-svg-s56ijih48UGIAIvv .statediagram-cluster rect.outer{rx:5px;ry:5px}#mermaid-svg-s56ijih48UGIAIvv .statediagram-state .divider{stroke:#9370db}#mermaid-svg-s56ijih48UGIAIvv .statediagram-state .title-state{rx:5px;ry:5px}#mermaid-svg-s56ijih48UGIAIvv .statediagram-cluster.statediagram-cluster .inner{fill:white}#mermaid-svg-s56ijih48UGIAIvv .statediagram-cluster.statediagram-cluster-alt .inner{fill:#e0e0e0}#mermaid-svg-s56ijih48UGIAIvv .statediagram-cluster .inner{rx:0;ry:0}#mermaid-svg-s56ijih48UGIAIvv .statediagram-state rect.basic{rx:5px;ry:5px}#mermaid-svg-s56ijih48UGIAIvv .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#efefef}#mermaid-svg-s56ijih48UGIAIvv .note-edge{stroke-dasharray:5}#mermaid-svg-s56ijih48UGIAIvv .statediagram-note rect{fill:#fff5ad;stroke:#aa3;stroke-width:1px;rx:0;ry:0}:root{--mermaid-font-family: '"trebuchet ms", verdana, arial';--mermaid-font-family: "Comic Sans MS", "Comic Sans", cursive}#mermaid-svg-s56ijih48UGIAIvv .error-icon{fill:#522}#mermaid-svg-s56ijih48UGIAIvv .error-text{fill:#522;stroke:#522}#mermaid-svg-s56ijih48UGIAIvv .edge-thickness-normal{stroke-width:2px}#mermaid-svg-s56ijih48UGIAIvv .edge-thickness-thick{stroke-width:3.5px}#mermaid-svg-s56ijih48UGIAIvv .edge-pattern-solid{stroke-dasharray:0}#mermaid-svg-s56ijih48UGIAIvv .edge-pattern-dashed{stroke-dasharray:3}#mermaid-svg-s56ijih48UGIAIvv .edge-pattern-dotted{stroke-dasharray:2}#mermaid-svg-s56ijih48UGIAIvv .marker{fill:#333}#mermaid-svg-s56ijih48UGIAIvv .marker.cross{stroke:#333} :root { --mermaid-font-family: "trebuchet ms", verdana, arial;}</style> <style>#mermaid-svg-s56ijih48UGIAIvv { color: rgba(0, 0, 0, 0.75); font: ; }</style>

<p>select * from t_usr</p>
<p>Database</p>
<p>select * from t_order</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">由上到下	</span><br></pre></td></tr></table></figure>

<style>#mermaid-svg-VDWle3OALy2vNW0o .label{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);fill:#333;color:#333}#mermaid-svg-VDWle3OALy2vNW0o .label text{fill:#333}#mermaid-svg-VDWle3OALy2vNW0o .node rect,#mermaid-svg-VDWle3OALy2vNW0o .node circle,#mermaid-svg-VDWle3OALy2vNW0o .node ellipse,#mermaid-svg-VDWle3OALy2vNW0o .node polygon,#mermaid-svg-VDWle3OALy2vNW0o .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-svg-VDWle3OALy2vNW0o .node .label{text-align:center;fill:#333}#mermaid-svg-VDWle3OALy2vNW0o .node.clickable{cursor:pointer}#mermaid-svg-VDWle3OALy2vNW0o .arrowheadPath{fill:#333}#mermaid-svg-VDWle3OALy2vNW0o .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-svg-VDWle3OALy2vNW0o .flowchart-link{stroke:#333;fill:none}#mermaid-svg-VDWle3OALy2vNW0o .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-svg-VDWle3OALy2vNW0o .edgeLabel rect{opacity:0.9}#mermaid-svg-VDWle3OALy2vNW0o .edgeLabel span{color:#333}#mermaid-svg-VDWle3OALy2vNW0o .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-svg-VDWle3OALy2vNW0o .cluster text{fill:#333}#mermaid-svg-VDWle3OALy2vNW0o div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-svg-VDWle3OALy2vNW0o .actor{stroke:#ccf;fill:#ECECFF}#mermaid-svg-VDWle3OALy2vNW0o text.actor>tspan{fill:#000;stroke:none}#mermaid-svg-VDWle3OALy2vNW0o .actor-line{stroke:grey}#mermaid-svg-VDWle3OALy2vNW0o .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333}#mermaid-svg-VDWle3OALy2vNW0o .messageLine1{stroke-width:1.5;stroke-dasharray:2, 2;stroke:#333}#mermaid-svg-VDWle3OALy2vNW0o #arrowhead path{fill:#333;stroke:#333}#mermaid-svg-VDWle3OALy2vNW0o .sequenceNumber{fill:#fff}#mermaid-svg-VDWle3OALy2vNW0o #sequencenumber{fill:#333}#mermaid-svg-VDWle3OALy2vNW0o #crosshead path{fill:#333;stroke:#333}#mermaid-svg-VDWle3OALy2vNW0o .messageText{fill:#333;stroke:#333}#mermaid-svg-VDWle3OALy2vNW0o .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-svg-VDWle3OALy2vNW0o .labelText,#mermaid-svg-VDWle3OALy2vNW0o .labelText>tspan{fill:#000;stroke:none}#mermaid-svg-VDWle3OALy2vNW0o .loopText,#mermaid-svg-VDWle3OALy2vNW0o .loopText>tspan{fill:#000;stroke:none}#mermaid-svg-VDWle3OALy2vNW0o .loopLine{stroke-width:2px;stroke-dasharray:2, 2;stroke:#ccf;fill:#ccf}#mermaid-svg-VDWle3OALy2vNW0o .note{stroke:#aa3;fill:#fff5ad}#mermaid-svg-VDWle3OALy2vNW0o .noteText,#mermaid-svg-VDWle3OALy2vNW0o .noteText>tspan{fill:#000;stroke:none}#mermaid-svg-VDWle3OALy2vNW0o .activation0{fill:#f4f4f4;stroke:#666}#mermaid-svg-VDWle3OALy2vNW0o .activation1{fill:#f4f4f4;stroke:#666}#mermaid-svg-VDWle3OALy2vNW0o .activation2{fill:#f4f4f4;stroke:#666}#mermaid-svg-VDWle3OALy2vNW0o .mermaid-main-font{font-family:"trebuchet ms", verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-VDWle3OALy2vNW0o .section{stroke:none;opacity:0.2}#mermaid-svg-VDWle3OALy2vNW0o .section0{fill:rgba(102,102,255,0.49)}#mermaid-svg-VDWle3OALy2vNW0o .section2{fill:#fff400}#mermaid-svg-VDWle3OALy2vNW0o .section1,#mermaid-svg-VDWle3OALy2vNW0o .section3{fill:#fff;opacity:0.2}#mermaid-svg-VDWle3OALy2vNW0o .sectionTitle0{fill:#333}#mermaid-svg-VDWle3OALy2vNW0o .sectionTitle1{fill:#333}#mermaid-svg-VDWle3OALy2vNW0o .sectionTitle2{fill:#333}#mermaid-svg-VDWle3OALy2vNW0o .sectionTitle3{fill:#333}#mermaid-svg-VDWle3OALy2vNW0o .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-VDWle3OALy2vNW0o .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-svg-VDWle3OALy2vNW0o .grid .tick text{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-VDWle3OALy2vNW0o .grid path{stroke-width:0}#mermaid-svg-VDWle3OALy2vNW0o .today{fill:none;stroke:red;stroke-width:2px}#mermaid-svg-VDWle3OALy2vNW0o .task{stroke-width:2}#mermaid-svg-VDWle3OALy2vNW0o .taskText{text-anchor:middle;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-VDWle3OALy2vNW0o .taskText:not([font-size]){font-size:11px}#mermaid-svg-VDWle3OALy2vNW0o .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-VDWle3OALy2vNW0o .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-svg-VDWle3OALy2vNW0o .task.clickable{cursor:pointer}#mermaid-svg-VDWle3OALy2vNW0o .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-svg-VDWle3OALy2vNW0o .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-svg-VDWle3OALy2vNW0o .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-svg-VDWle3OALy2vNW0o .taskText0,#mermaid-svg-VDWle3OALy2vNW0o .taskText1,#mermaid-svg-VDWle3OALy2vNW0o .taskText2,#mermaid-svg-VDWle3OALy2vNW0o .taskText3{fill:#fff}#mermaid-svg-VDWle3OALy2vNW0o .task0,#mermaid-svg-VDWle3OALy2vNW0o .task1,#mermaid-svg-VDWle3OALy2vNW0o .task2,#mermaid-svg-VDWle3OALy2vNW0o .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-svg-VDWle3OALy2vNW0o .taskTextOutside0,#mermaid-svg-VDWle3OALy2vNW0o .taskTextOutside2{fill:#000}#mermaid-svg-VDWle3OALy2vNW0o .taskTextOutside1,#mermaid-svg-VDWle3OALy2vNW0o .taskTextOutside3{fill:#000}#mermaid-svg-VDWle3OALy2vNW0o .active0,#mermaid-svg-VDWle3OALy2vNW0o .active1,#mermaid-svg-VDWle3OALy2vNW0o .active2,#mermaid-svg-VDWle3OALy2vNW0o .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-svg-VDWle3OALy2vNW0o .activeText0,#mermaid-svg-VDWle3OALy2vNW0o .activeText1,#mermaid-svg-VDWle3OALy2vNW0o .activeText2,#mermaid-svg-VDWle3OALy2vNW0o .activeText3{fill:#000 !important}#mermaid-svg-VDWle3OALy2vNW0o .done0,#mermaid-svg-VDWle3OALy2vNW0o .done1,#mermaid-svg-VDWle3OALy2vNW0o .done2,#mermaid-svg-VDWle3OALy2vNW0o .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-svg-VDWle3OALy2vNW0o .doneText0,#mermaid-svg-VDWle3OALy2vNW0o .doneText1,#mermaid-svg-VDWle3OALy2vNW0o .doneText2,#mermaid-svg-VDWle3OALy2vNW0o .doneText3{fill:#000 !important}#mermaid-svg-VDWle3OALy2vNW0o .crit0,#mermaid-svg-VDWle3OALy2vNW0o .crit1,#mermaid-svg-VDWle3OALy2vNW0o .crit2,#mermaid-svg-VDWle3OALy2vNW0o .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-svg-VDWle3OALy2vNW0o .activeCrit0,#mermaid-svg-VDWle3OALy2vNW0o .activeCrit1,#mermaid-svg-VDWle3OALy2vNW0o .activeCrit2,#mermaid-svg-VDWle3OALy2vNW0o .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-svg-VDWle3OALy2vNW0o .doneCrit0,#mermaid-svg-VDWle3OALy2vNW0o .doneCrit1,#mermaid-svg-VDWle3OALy2vNW0o .doneCrit2,#mermaid-svg-VDWle3OALy2vNW0o .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-svg-VDWle3OALy2vNW0o .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-svg-VDWle3OALy2vNW0o .milestoneText{font-style:italic}#mermaid-svg-VDWle3OALy2vNW0o .doneCritText0,#mermaid-svg-VDWle3OALy2vNW0o .doneCritText1,#mermaid-svg-VDWle3OALy2vNW0o .doneCritText2,#mermaid-svg-VDWle3OALy2vNW0o .doneCritText3{fill:#000 !important}#mermaid-svg-VDWle3OALy2vNW0o .activeCritText0,#mermaid-svg-VDWle3OALy2vNW0o .activeCritText1,#mermaid-svg-VDWle3OALy2vNW0o .activeCritText2,#mermaid-svg-VDWle3OALy2vNW0o .activeCritText3{fill:#000 !important}#mermaid-svg-VDWle3OALy2vNW0o .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-VDWle3OALy2vNW0o g.classGroup text{fill:#9370db;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-svg-VDWle3OALy2vNW0o g.classGroup text .title{font-weight:bolder}#mermaid-svg-VDWle3OALy2vNW0o g.clickable{cursor:pointer}#mermaid-svg-VDWle3OALy2vNW0o g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-svg-VDWle3OALy2vNW0o g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-svg-VDWle3OALy2vNW0o .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-svg-VDWle3OALy2vNW0o .classLabel .label{fill:#9370db;font-size:10px}#mermaid-svg-VDWle3OALy2vNW0o .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-svg-VDWle3OALy2vNW0o .dashed-line{stroke-dasharray:3}#mermaid-svg-VDWle3OALy2vNW0o #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-VDWle3OALy2vNW0o #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-VDWle3OALy2vNW0o #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-svg-VDWle3OALy2vNW0o #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-svg-VDWle3OALy2vNW0o #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-VDWle3OALy2vNW0o #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-VDWle3OALy2vNW0o #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-VDWle3OALy2vNW0o #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-VDWle3OALy2vNW0o .commit-id,#mermaid-svg-VDWle3OALy2vNW0o .commit-msg,#mermaid-svg-VDWle3OALy2vNW0o .branch-label{fill:lightgrey;color:lightgrey;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-VDWle3OALy2vNW0o .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-VDWle3OALy2vNW0o .slice{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-VDWle3OALy2vNW0o g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-VDWle3OALy2vNW0o g.stateGroup text{fill:#9370db;fill:#333;stroke:none;font-size:10px}#mermaid-svg-VDWle3OALy2vNW0o g.statediagram-cluster .cluster-label text{fill:#333}#mermaid-svg-VDWle3OALy2vNW0o g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-svg-VDWle3OALy2vNW0o g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-svg-VDWle3OALy2vNW0o g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-svg-VDWle3OALy2vNW0o .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-svg-VDWle3OALy2vNW0o .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-svg-VDWle3OALy2vNW0o .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-svg-VDWle3OALy2vNW0o .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-svg-VDWle3OALy2vNW0o .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-svg-VDWle3OALy2vNW0o .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.7}#mermaid-svg-VDWle3OALy2vNW0o .edgeLabel text{fill:#333}#mermaid-svg-VDWle3OALy2vNW0o .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-VDWle3OALy2vNW0o .node circle.state-start{fill:black;stroke:black}#mermaid-svg-VDWle3OALy2vNW0o .node circle.state-end{fill:black;stroke:white;stroke-width:1.5}#mermaid-svg-VDWle3OALy2vNW0o #statediagram-barbEnd{fill:#9370db}#mermaid-svg-VDWle3OALy2vNW0o .statediagram-cluster rect{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-svg-VDWle3OALy2vNW0o .statediagram-cluster rect.outer{rx:5px;ry:5px}#mermaid-svg-VDWle3OALy2vNW0o .statediagram-state .divider{stroke:#9370db}#mermaid-svg-VDWle3OALy2vNW0o .statediagram-state .title-state{rx:5px;ry:5px}#mermaid-svg-VDWle3OALy2vNW0o .statediagram-cluster.statediagram-cluster .inner{fill:white}#mermaid-svg-VDWle3OALy2vNW0o .statediagram-cluster.statediagram-cluster-alt .inner{fill:#e0e0e0}#mermaid-svg-VDWle3OALy2vNW0o .statediagram-cluster .inner{rx:0;ry:0}#mermaid-svg-VDWle3OALy2vNW0o .statediagram-state rect.basic{rx:5px;ry:5px}#mermaid-svg-VDWle3OALy2vNW0o .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#efefef}#mermaid-svg-VDWle3OALy2vNW0o .note-edge{stroke-dasharray:5}#mermaid-svg-VDWle3OALy2vNW0o .statediagram-note rect{fill:#fff5ad;stroke:#aa3;stroke-width:1px;rx:0;ry:0}:root{--mermaid-font-family: '"trebuchet ms", verdana, arial';--mermaid-font-family: "Comic Sans MS", "Comic Sans", cursive}#mermaid-svg-VDWle3OALy2vNW0o .error-icon{fill:#522}#mermaid-svg-VDWle3OALy2vNW0o .error-text{fill:#522;stroke:#522}#mermaid-svg-VDWle3OALy2vNW0o .edge-thickness-normal{stroke-width:2px}#mermaid-svg-VDWle3OALy2vNW0o .edge-thickness-thick{stroke-width:3.5px}#mermaid-svg-VDWle3OALy2vNW0o .edge-pattern-solid{stroke-dasharray:0}#mermaid-svg-VDWle3OALy2vNW0o .edge-pattern-dashed{stroke-dasharray:3}#mermaid-svg-VDWle3OALy2vNW0o .edge-pattern-dotted{stroke-dasharray:2}#mermaid-svg-VDWle3OALy2vNW0o .marker{fill:#333}#mermaid-svg-VDWle3OALy2vNW0o .marker.cross{stroke:#333} :root { --mermaid-font-family: "trebuchet ms", verdana, arial;}</style> <style>#mermaid-svg-VDWle3OALy2vNW0o { color: rgba(0, 0, 0, 0.75); font: ; }</style>

<p>select * from t_usr</p>
<p>Database01</p>
<p>select * from t_order</p>
<p>Database02</p>
<p>2）水平拆分<br>它不再将数据根据业务逻辑分类，而是通过某个字段（或某几个字段），根据某种规则将数据分散至多个库或表中，每个分片仅包含数据的一部分。</p>
<style>#mermaid-svg-ofyXPQUemxGFJKMq .label{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);fill:#333;color:#333}#mermaid-svg-ofyXPQUemxGFJKMq .label text{fill:#333}#mermaid-svg-ofyXPQUemxGFJKMq .node rect,#mermaid-svg-ofyXPQUemxGFJKMq .node circle,#mermaid-svg-ofyXPQUemxGFJKMq .node ellipse,#mermaid-svg-ofyXPQUemxGFJKMq .node polygon,#mermaid-svg-ofyXPQUemxGFJKMq .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-svg-ofyXPQUemxGFJKMq .node .label{text-align:center;fill:#333}#mermaid-svg-ofyXPQUemxGFJKMq .node.clickable{cursor:pointer}#mermaid-svg-ofyXPQUemxGFJKMq .arrowheadPath{fill:#333}#mermaid-svg-ofyXPQUemxGFJKMq .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-svg-ofyXPQUemxGFJKMq .flowchart-link{stroke:#333;fill:none}#mermaid-svg-ofyXPQUemxGFJKMq .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-svg-ofyXPQUemxGFJKMq .edgeLabel rect{opacity:0.9}#mermaid-svg-ofyXPQUemxGFJKMq .edgeLabel span{color:#333}#mermaid-svg-ofyXPQUemxGFJKMq .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-svg-ofyXPQUemxGFJKMq .cluster text{fill:#333}#mermaid-svg-ofyXPQUemxGFJKMq div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-svg-ofyXPQUemxGFJKMq .actor{stroke:#ccf;fill:#ECECFF}#mermaid-svg-ofyXPQUemxGFJKMq text.actor>tspan{fill:#000;stroke:none}#mermaid-svg-ofyXPQUemxGFJKMq .actor-line{stroke:grey}#mermaid-svg-ofyXPQUemxGFJKMq .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333}#mermaid-svg-ofyXPQUemxGFJKMq .messageLine1{stroke-width:1.5;stroke-dasharray:2, 2;stroke:#333}#mermaid-svg-ofyXPQUemxGFJKMq #arrowhead path{fill:#333;stroke:#333}#mermaid-svg-ofyXPQUemxGFJKMq .sequenceNumber{fill:#fff}#mermaid-svg-ofyXPQUemxGFJKMq #sequencenumber{fill:#333}#mermaid-svg-ofyXPQUemxGFJKMq #crosshead path{fill:#333;stroke:#333}#mermaid-svg-ofyXPQUemxGFJKMq .messageText{fill:#333;stroke:#333}#mermaid-svg-ofyXPQUemxGFJKMq .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-svg-ofyXPQUemxGFJKMq .labelText,#mermaid-svg-ofyXPQUemxGFJKMq .labelText>tspan{fill:#000;stroke:none}#mermaid-svg-ofyXPQUemxGFJKMq .loopText,#mermaid-svg-ofyXPQUemxGFJKMq .loopText>tspan{fill:#000;stroke:none}#mermaid-svg-ofyXPQUemxGFJKMq .loopLine{stroke-width:2px;stroke-dasharray:2, 2;stroke:#ccf;fill:#ccf}#mermaid-svg-ofyXPQUemxGFJKMq .note{stroke:#aa3;fill:#fff5ad}#mermaid-svg-ofyXPQUemxGFJKMq .noteText,#mermaid-svg-ofyXPQUemxGFJKMq .noteText>tspan{fill:#000;stroke:none}#mermaid-svg-ofyXPQUemxGFJKMq .activation0{fill:#f4f4f4;stroke:#666}#mermaid-svg-ofyXPQUemxGFJKMq .activation1{fill:#f4f4f4;stroke:#666}#mermaid-svg-ofyXPQUemxGFJKMq .activation2{fill:#f4f4f4;stroke:#666}#mermaid-svg-ofyXPQUemxGFJKMq .mermaid-main-font{font-family:"trebuchet ms", verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-ofyXPQUemxGFJKMq .section{stroke:none;opacity:0.2}#mermaid-svg-ofyXPQUemxGFJKMq .section0{fill:rgba(102,102,255,0.49)}#mermaid-svg-ofyXPQUemxGFJKMq .section2{fill:#fff400}#mermaid-svg-ofyXPQUemxGFJKMq .section1,#mermaid-svg-ofyXPQUemxGFJKMq .section3{fill:#fff;opacity:0.2}#mermaid-svg-ofyXPQUemxGFJKMq .sectionTitle0{fill:#333}#mermaid-svg-ofyXPQUemxGFJKMq .sectionTitle1{fill:#333}#mermaid-svg-ofyXPQUemxGFJKMq .sectionTitle2{fill:#333}#mermaid-svg-ofyXPQUemxGFJKMq .sectionTitle3{fill:#333}#mermaid-svg-ofyXPQUemxGFJKMq .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-ofyXPQUemxGFJKMq .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-svg-ofyXPQUemxGFJKMq .grid .tick text{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-ofyXPQUemxGFJKMq .grid path{stroke-width:0}#mermaid-svg-ofyXPQUemxGFJKMq .today{fill:none;stroke:red;stroke-width:2px}#mermaid-svg-ofyXPQUemxGFJKMq .task{stroke-width:2}#mermaid-svg-ofyXPQUemxGFJKMq .taskText{text-anchor:middle;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-ofyXPQUemxGFJKMq .taskText:not([font-size]){font-size:11px}#mermaid-svg-ofyXPQUemxGFJKMq .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-ofyXPQUemxGFJKMq .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-svg-ofyXPQUemxGFJKMq .task.clickable{cursor:pointer}#mermaid-svg-ofyXPQUemxGFJKMq .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-svg-ofyXPQUemxGFJKMq .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-svg-ofyXPQUemxGFJKMq .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-svg-ofyXPQUemxGFJKMq .taskText0,#mermaid-svg-ofyXPQUemxGFJKMq .taskText1,#mermaid-svg-ofyXPQUemxGFJKMq .taskText2,#mermaid-svg-ofyXPQUemxGFJKMq .taskText3{fill:#fff}#mermaid-svg-ofyXPQUemxGFJKMq .task0,#mermaid-svg-ofyXPQUemxGFJKMq .task1,#mermaid-svg-ofyXPQUemxGFJKMq .task2,#mermaid-svg-ofyXPQUemxGFJKMq .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-svg-ofyXPQUemxGFJKMq .taskTextOutside0,#mermaid-svg-ofyXPQUemxGFJKMq .taskTextOutside2{fill:#000}#mermaid-svg-ofyXPQUemxGFJKMq .taskTextOutside1,#mermaid-svg-ofyXPQUemxGFJKMq .taskTextOutside3{fill:#000}#mermaid-svg-ofyXPQUemxGFJKMq .active0,#mermaid-svg-ofyXPQUemxGFJKMq .active1,#mermaid-svg-ofyXPQUemxGFJKMq .active2,#mermaid-svg-ofyXPQUemxGFJKMq .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-svg-ofyXPQUemxGFJKMq .activeText0,#mermaid-svg-ofyXPQUemxGFJKMq .activeText1,#mermaid-svg-ofyXPQUemxGFJKMq .activeText2,#mermaid-svg-ofyXPQUemxGFJKMq .activeText3{fill:#000 !important}#mermaid-svg-ofyXPQUemxGFJKMq .done0,#mermaid-svg-ofyXPQUemxGFJKMq .done1,#mermaid-svg-ofyXPQUemxGFJKMq .done2,#mermaid-svg-ofyXPQUemxGFJKMq .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-svg-ofyXPQUemxGFJKMq .doneText0,#mermaid-svg-ofyXPQUemxGFJKMq .doneText1,#mermaid-svg-ofyXPQUemxGFJKMq .doneText2,#mermaid-svg-ofyXPQUemxGFJKMq .doneText3{fill:#000 !important}#mermaid-svg-ofyXPQUemxGFJKMq .crit0,#mermaid-svg-ofyXPQUemxGFJKMq .crit1,#mermaid-svg-ofyXPQUemxGFJKMq .crit2,#mermaid-svg-ofyXPQUemxGFJKMq .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-svg-ofyXPQUemxGFJKMq .activeCrit0,#mermaid-svg-ofyXPQUemxGFJKMq .activeCrit1,#mermaid-svg-ofyXPQUemxGFJKMq .activeCrit2,#mermaid-svg-ofyXPQUemxGFJKMq .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-svg-ofyXPQUemxGFJKMq .doneCrit0,#mermaid-svg-ofyXPQUemxGFJKMq .doneCrit1,#mermaid-svg-ofyXPQUemxGFJKMq .doneCrit2,#mermaid-svg-ofyXPQUemxGFJKMq .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-svg-ofyXPQUemxGFJKMq .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-svg-ofyXPQUemxGFJKMq .milestoneText{font-style:italic}#mermaid-svg-ofyXPQUemxGFJKMq .doneCritText0,#mermaid-svg-ofyXPQUemxGFJKMq .doneCritText1,#mermaid-svg-ofyXPQUemxGFJKMq .doneCritText2,#mermaid-svg-ofyXPQUemxGFJKMq .doneCritText3{fill:#000 !important}#mermaid-svg-ofyXPQUemxGFJKMq .activeCritText0,#mermaid-svg-ofyXPQUemxGFJKMq .activeCritText1,#mermaid-svg-ofyXPQUemxGFJKMq .activeCritText2,#mermaid-svg-ofyXPQUemxGFJKMq .activeCritText3{fill:#000 !important}#mermaid-svg-ofyXPQUemxGFJKMq .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-ofyXPQUemxGFJKMq g.classGroup text{fill:#9370db;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-svg-ofyXPQUemxGFJKMq g.classGroup text .title{font-weight:bolder}#mermaid-svg-ofyXPQUemxGFJKMq g.clickable{cursor:pointer}#mermaid-svg-ofyXPQUemxGFJKMq g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-svg-ofyXPQUemxGFJKMq g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-svg-ofyXPQUemxGFJKMq .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-svg-ofyXPQUemxGFJKMq .classLabel .label{fill:#9370db;font-size:10px}#mermaid-svg-ofyXPQUemxGFJKMq .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-svg-ofyXPQUemxGFJKMq .dashed-line{stroke-dasharray:3}#mermaid-svg-ofyXPQUemxGFJKMq #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-ofyXPQUemxGFJKMq #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-ofyXPQUemxGFJKMq #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-svg-ofyXPQUemxGFJKMq #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-svg-ofyXPQUemxGFJKMq #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-ofyXPQUemxGFJKMq #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-ofyXPQUemxGFJKMq #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-ofyXPQUemxGFJKMq #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-ofyXPQUemxGFJKMq .commit-id,#mermaid-svg-ofyXPQUemxGFJKMq .commit-msg,#mermaid-svg-ofyXPQUemxGFJKMq .branch-label{fill:lightgrey;color:lightgrey;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-ofyXPQUemxGFJKMq .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-ofyXPQUemxGFJKMq .slice{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-ofyXPQUemxGFJKMq g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-ofyXPQUemxGFJKMq g.stateGroup text{fill:#9370db;fill:#333;stroke:none;font-size:10px}#mermaid-svg-ofyXPQUemxGFJKMq g.statediagram-cluster .cluster-label text{fill:#333}#mermaid-svg-ofyXPQUemxGFJKMq g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-svg-ofyXPQUemxGFJKMq g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-svg-ofyXPQUemxGFJKMq g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-svg-ofyXPQUemxGFJKMq .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-svg-ofyXPQUemxGFJKMq .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-svg-ofyXPQUemxGFJKMq .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-svg-ofyXPQUemxGFJKMq .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-svg-ofyXPQUemxGFJKMq .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-svg-ofyXPQUemxGFJKMq .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.7}#mermaid-svg-ofyXPQUemxGFJKMq .edgeLabel text{fill:#333}#mermaid-svg-ofyXPQUemxGFJKMq .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-ofyXPQUemxGFJKMq .node circle.state-start{fill:black;stroke:black}#mermaid-svg-ofyXPQUemxGFJKMq .node circle.state-end{fill:black;stroke:white;stroke-width:1.5}#mermaid-svg-ofyXPQUemxGFJKMq #statediagram-barbEnd{fill:#9370db}#mermaid-svg-ofyXPQUemxGFJKMq .statediagram-cluster rect{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-svg-ofyXPQUemxGFJKMq .statediagram-cluster rect.outer{rx:5px;ry:5px}#mermaid-svg-ofyXPQUemxGFJKMq .statediagram-state .divider{stroke:#9370db}#mermaid-svg-ofyXPQUemxGFJKMq .statediagram-state .title-state{rx:5px;ry:5px}#mermaid-svg-ofyXPQUemxGFJKMq .statediagram-cluster.statediagram-cluster .inner{fill:white}#mermaid-svg-ofyXPQUemxGFJKMq .statediagram-cluster.statediagram-cluster-alt .inner{fill:#e0e0e0}#mermaid-svg-ofyXPQUemxGFJKMq .statediagram-cluster .inner{rx:0;ry:0}#mermaid-svg-ofyXPQUemxGFJKMq .statediagram-state rect.basic{rx:5px;ry:5px}#mermaid-svg-ofyXPQUemxGFJKMq .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#efefef}#mermaid-svg-ofyXPQUemxGFJKMq .note-edge{stroke-dasharray:5}#mermaid-svg-ofyXPQUemxGFJKMq .statediagram-note rect{fill:#fff5ad;stroke:#aa3;stroke-width:1px;rx:0;ry:0}:root{--mermaid-font-family: '"trebuchet ms", verdana, arial';--mermaid-font-family: "Comic Sans MS", "Comic Sans", cursive}#mermaid-svg-ofyXPQUemxGFJKMq .error-icon{fill:#522}#mermaid-svg-ofyXPQUemxGFJKMq .error-text{fill:#522;stroke:#522}#mermaid-svg-ofyXPQUemxGFJKMq .edge-thickness-normal{stroke-width:2px}#mermaid-svg-ofyXPQUemxGFJKMq .edge-thickness-thick{stroke-width:3.5px}#mermaid-svg-ofyXPQUemxGFJKMq .edge-pattern-solid{stroke-dasharray:0}#mermaid-svg-ofyXPQUemxGFJKMq .edge-pattern-dashed{stroke-dasharray:3}#mermaid-svg-ofyXPQUemxGFJKMq .edge-pattern-dotted{stroke-dasharray:2}#mermaid-svg-ofyXPQUemxGFJKMq .marker{fill:#333}#mermaid-svg-ofyXPQUemxGFJKMq .marker.cross{stroke:#333} :root { --mermaid-font-family: "trebuchet ms", verdana, arial;}</style> <style>#mermaid-svg-ofyXPQUemxGFJKMq { color: rgba(0, 0, 0, 0.75); font: ; }</style>

<p>select * from t_usr where id &#x3D; 1</p>
<p>Database</p>
<p>select * from t_usr where id &#x3D;2</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">由上到下	</span><br></pre></td></tr></table></figure>

<style>#mermaid-svg-OROFWpBsklGtNkaQ .label{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);fill:#333;color:#333}#mermaid-svg-OROFWpBsklGtNkaQ .label text{fill:#333}#mermaid-svg-OROFWpBsklGtNkaQ .node rect,#mermaid-svg-OROFWpBsklGtNkaQ .node circle,#mermaid-svg-OROFWpBsklGtNkaQ .node ellipse,#mermaid-svg-OROFWpBsklGtNkaQ .node polygon,#mermaid-svg-OROFWpBsklGtNkaQ .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-svg-OROFWpBsklGtNkaQ .node .label{text-align:center;fill:#333}#mermaid-svg-OROFWpBsklGtNkaQ .node.clickable{cursor:pointer}#mermaid-svg-OROFWpBsklGtNkaQ .arrowheadPath{fill:#333}#mermaid-svg-OROFWpBsklGtNkaQ .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-svg-OROFWpBsklGtNkaQ .flowchart-link{stroke:#333;fill:none}#mermaid-svg-OROFWpBsklGtNkaQ .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-svg-OROFWpBsklGtNkaQ .edgeLabel rect{opacity:0.9}#mermaid-svg-OROFWpBsklGtNkaQ .edgeLabel span{color:#333}#mermaid-svg-OROFWpBsklGtNkaQ .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-svg-OROFWpBsklGtNkaQ .cluster text{fill:#333}#mermaid-svg-OROFWpBsklGtNkaQ div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-svg-OROFWpBsklGtNkaQ .actor{stroke:#ccf;fill:#ECECFF}#mermaid-svg-OROFWpBsklGtNkaQ text.actor>tspan{fill:#000;stroke:none}#mermaid-svg-OROFWpBsklGtNkaQ .actor-line{stroke:grey}#mermaid-svg-OROFWpBsklGtNkaQ .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333}#mermaid-svg-OROFWpBsklGtNkaQ .messageLine1{stroke-width:1.5;stroke-dasharray:2, 2;stroke:#333}#mermaid-svg-OROFWpBsklGtNkaQ #arrowhead path{fill:#333;stroke:#333}#mermaid-svg-OROFWpBsklGtNkaQ .sequenceNumber{fill:#fff}#mermaid-svg-OROFWpBsklGtNkaQ #sequencenumber{fill:#333}#mermaid-svg-OROFWpBsklGtNkaQ #crosshead path{fill:#333;stroke:#333}#mermaid-svg-OROFWpBsklGtNkaQ .messageText{fill:#333;stroke:#333}#mermaid-svg-OROFWpBsklGtNkaQ .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-svg-OROFWpBsklGtNkaQ .labelText,#mermaid-svg-OROFWpBsklGtNkaQ .labelText>tspan{fill:#000;stroke:none}#mermaid-svg-OROFWpBsklGtNkaQ .loopText,#mermaid-svg-OROFWpBsklGtNkaQ .loopText>tspan{fill:#000;stroke:none}#mermaid-svg-OROFWpBsklGtNkaQ .loopLine{stroke-width:2px;stroke-dasharray:2, 2;stroke:#ccf;fill:#ccf}#mermaid-svg-OROFWpBsklGtNkaQ .note{stroke:#aa3;fill:#fff5ad}#mermaid-svg-OROFWpBsklGtNkaQ .noteText,#mermaid-svg-OROFWpBsklGtNkaQ .noteText>tspan{fill:#000;stroke:none}#mermaid-svg-OROFWpBsklGtNkaQ .activation0{fill:#f4f4f4;stroke:#666}#mermaid-svg-OROFWpBsklGtNkaQ .activation1{fill:#f4f4f4;stroke:#666}#mermaid-svg-OROFWpBsklGtNkaQ .activation2{fill:#f4f4f4;stroke:#666}#mermaid-svg-OROFWpBsklGtNkaQ .mermaid-main-font{font-family:"trebuchet ms", verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-OROFWpBsklGtNkaQ .section{stroke:none;opacity:0.2}#mermaid-svg-OROFWpBsklGtNkaQ .section0{fill:rgba(102,102,255,0.49)}#mermaid-svg-OROFWpBsklGtNkaQ .section2{fill:#fff400}#mermaid-svg-OROFWpBsklGtNkaQ .section1,#mermaid-svg-OROFWpBsklGtNkaQ .section3{fill:#fff;opacity:0.2}#mermaid-svg-OROFWpBsklGtNkaQ .sectionTitle0{fill:#333}#mermaid-svg-OROFWpBsklGtNkaQ .sectionTitle1{fill:#333}#mermaid-svg-OROFWpBsklGtNkaQ .sectionTitle2{fill:#333}#mermaid-svg-OROFWpBsklGtNkaQ .sectionTitle3{fill:#333}#mermaid-svg-OROFWpBsklGtNkaQ .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-OROFWpBsklGtNkaQ .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-svg-OROFWpBsklGtNkaQ .grid .tick text{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-OROFWpBsklGtNkaQ .grid path{stroke-width:0}#mermaid-svg-OROFWpBsklGtNkaQ .today{fill:none;stroke:red;stroke-width:2px}#mermaid-svg-OROFWpBsklGtNkaQ .task{stroke-width:2}#mermaid-svg-OROFWpBsklGtNkaQ .taskText{text-anchor:middle;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-OROFWpBsklGtNkaQ .taskText:not([font-size]){font-size:11px}#mermaid-svg-OROFWpBsklGtNkaQ .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-OROFWpBsklGtNkaQ .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-svg-OROFWpBsklGtNkaQ .task.clickable{cursor:pointer}#mermaid-svg-OROFWpBsklGtNkaQ .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-svg-OROFWpBsklGtNkaQ .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-svg-OROFWpBsklGtNkaQ .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-svg-OROFWpBsklGtNkaQ .taskText0,#mermaid-svg-OROFWpBsklGtNkaQ .taskText1,#mermaid-svg-OROFWpBsklGtNkaQ .taskText2,#mermaid-svg-OROFWpBsklGtNkaQ .taskText3{fill:#fff}#mermaid-svg-OROFWpBsklGtNkaQ .task0,#mermaid-svg-OROFWpBsklGtNkaQ .task1,#mermaid-svg-OROFWpBsklGtNkaQ .task2,#mermaid-svg-OROFWpBsklGtNkaQ .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-svg-OROFWpBsklGtNkaQ .taskTextOutside0,#mermaid-svg-OROFWpBsklGtNkaQ .taskTextOutside2{fill:#000}#mermaid-svg-OROFWpBsklGtNkaQ .taskTextOutside1,#mermaid-svg-OROFWpBsklGtNkaQ .taskTextOutside3{fill:#000}#mermaid-svg-OROFWpBsklGtNkaQ .active0,#mermaid-svg-OROFWpBsklGtNkaQ .active1,#mermaid-svg-OROFWpBsklGtNkaQ .active2,#mermaid-svg-OROFWpBsklGtNkaQ .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-svg-OROFWpBsklGtNkaQ .activeText0,#mermaid-svg-OROFWpBsklGtNkaQ .activeText1,#mermaid-svg-OROFWpBsklGtNkaQ .activeText2,#mermaid-svg-OROFWpBsklGtNkaQ .activeText3{fill:#000 !important}#mermaid-svg-OROFWpBsklGtNkaQ .done0,#mermaid-svg-OROFWpBsklGtNkaQ .done1,#mermaid-svg-OROFWpBsklGtNkaQ .done2,#mermaid-svg-OROFWpBsklGtNkaQ .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-svg-OROFWpBsklGtNkaQ .doneText0,#mermaid-svg-OROFWpBsklGtNkaQ .doneText1,#mermaid-svg-OROFWpBsklGtNkaQ .doneText2,#mermaid-svg-OROFWpBsklGtNkaQ .doneText3{fill:#000 !important}#mermaid-svg-OROFWpBsklGtNkaQ .crit0,#mermaid-svg-OROFWpBsklGtNkaQ .crit1,#mermaid-svg-OROFWpBsklGtNkaQ .crit2,#mermaid-svg-OROFWpBsklGtNkaQ .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-svg-OROFWpBsklGtNkaQ .activeCrit0,#mermaid-svg-OROFWpBsklGtNkaQ .activeCrit1,#mermaid-svg-OROFWpBsklGtNkaQ .activeCrit2,#mermaid-svg-OROFWpBsklGtNkaQ .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-svg-OROFWpBsklGtNkaQ .doneCrit0,#mermaid-svg-OROFWpBsklGtNkaQ .doneCrit1,#mermaid-svg-OROFWpBsklGtNkaQ .doneCrit2,#mermaid-svg-OROFWpBsklGtNkaQ .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-svg-OROFWpBsklGtNkaQ .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-svg-OROFWpBsklGtNkaQ .milestoneText{font-style:italic}#mermaid-svg-OROFWpBsklGtNkaQ .doneCritText0,#mermaid-svg-OROFWpBsklGtNkaQ .doneCritText1,#mermaid-svg-OROFWpBsklGtNkaQ .doneCritText2,#mermaid-svg-OROFWpBsklGtNkaQ .doneCritText3{fill:#000 !important}#mermaid-svg-OROFWpBsklGtNkaQ .activeCritText0,#mermaid-svg-OROFWpBsklGtNkaQ .activeCritText1,#mermaid-svg-OROFWpBsklGtNkaQ .activeCritText2,#mermaid-svg-OROFWpBsklGtNkaQ .activeCritText3{fill:#000 !important}#mermaid-svg-OROFWpBsklGtNkaQ .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-OROFWpBsklGtNkaQ g.classGroup text{fill:#9370db;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-svg-OROFWpBsklGtNkaQ g.classGroup text .title{font-weight:bolder}#mermaid-svg-OROFWpBsklGtNkaQ g.clickable{cursor:pointer}#mermaid-svg-OROFWpBsklGtNkaQ g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-svg-OROFWpBsklGtNkaQ g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-svg-OROFWpBsklGtNkaQ .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-svg-OROFWpBsklGtNkaQ .classLabel .label{fill:#9370db;font-size:10px}#mermaid-svg-OROFWpBsklGtNkaQ .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-svg-OROFWpBsklGtNkaQ .dashed-line{stroke-dasharray:3}#mermaid-svg-OROFWpBsklGtNkaQ #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-OROFWpBsklGtNkaQ #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-OROFWpBsklGtNkaQ #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-svg-OROFWpBsklGtNkaQ #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-svg-OROFWpBsklGtNkaQ #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-OROFWpBsklGtNkaQ #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-OROFWpBsklGtNkaQ #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-OROFWpBsklGtNkaQ #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-OROFWpBsklGtNkaQ .commit-id,#mermaid-svg-OROFWpBsklGtNkaQ .commit-msg,#mermaid-svg-OROFWpBsklGtNkaQ .branch-label{fill:lightgrey;color:lightgrey;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-OROFWpBsklGtNkaQ .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-OROFWpBsklGtNkaQ .slice{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-OROFWpBsklGtNkaQ g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-OROFWpBsklGtNkaQ g.stateGroup text{fill:#9370db;fill:#333;stroke:none;font-size:10px}#mermaid-svg-OROFWpBsklGtNkaQ g.statediagram-cluster .cluster-label text{fill:#333}#mermaid-svg-OROFWpBsklGtNkaQ g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-svg-OROFWpBsklGtNkaQ g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-svg-OROFWpBsklGtNkaQ g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-svg-OROFWpBsklGtNkaQ .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-svg-OROFWpBsklGtNkaQ .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-svg-OROFWpBsklGtNkaQ .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-svg-OROFWpBsklGtNkaQ .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-svg-OROFWpBsklGtNkaQ .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-svg-OROFWpBsklGtNkaQ .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.7}#mermaid-svg-OROFWpBsklGtNkaQ .edgeLabel text{fill:#333}#mermaid-svg-OROFWpBsklGtNkaQ .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-OROFWpBsklGtNkaQ .node circle.state-start{fill:black;stroke:black}#mermaid-svg-OROFWpBsklGtNkaQ .node circle.state-end{fill:black;stroke:white;stroke-width:1.5}#mermaid-svg-OROFWpBsklGtNkaQ #statediagram-barbEnd{fill:#9370db}#mermaid-svg-OROFWpBsklGtNkaQ .statediagram-cluster rect{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-svg-OROFWpBsklGtNkaQ .statediagram-cluster rect.outer{rx:5px;ry:5px}#mermaid-svg-OROFWpBsklGtNkaQ .statediagram-state .divider{stroke:#9370db}#mermaid-svg-OROFWpBsklGtNkaQ .statediagram-state .title-state{rx:5px;ry:5px}#mermaid-svg-OROFWpBsklGtNkaQ .statediagram-cluster.statediagram-cluster .inner{fill:white}#mermaid-svg-OROFWpBsklGtNkaQ .statediagram-cluster.statediagram-cluster-alt .inner{fill:#e0e0e0}#mermaid-svg-OROFWpBsklGtNkaQ .statediagram-cluster .inner{rx:0;ry:0}#mermaid-svg-OROFWpBsklGtNkaQ .statediagram-state rect.basic{rx:5px;ry:5px}#mermaid-svg-OROFWpBsklGtNkaQ .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#efefef}#mermaid-svg-OROFWpBsklGtNkaQ .note-edge{stroke-dasharray:5}#mermaid-svg-OROFWpBsklGtNkaQ .statediagram-note rect{fill:#fff5ad;stroke:#aa3;stroke-width:1px;rx:0;ry:0}:root{--mermaid-font-family: '"trebuchet ms", verdana, arial';--mermaid-font-family: "Comic Sans MS", "Comic Sans", cursive}#mermaid-svg-OROFWpBsklGtNkaQ .error-icon{fill:#522}#mermaid-svg-OROFWpBsklGtNkaQ .error-text{fill:#522;stroke:#522}#mermaid-svg-OROFWpBsklGtNkaQ .edge-thickness-normal{stroke-width:2px}#mermaid-svg-OROFWpBsklGtNkaQ .edge-thickness-thick{stroke-width:3.5px}#mermaid-svg-OROFWpBsklGtNkaQ .edge-pattern-solid{stroke-dasharray:0}#mermaid-svg-OROFWpBsklGtNkaQ .edge-pattern-dashed{stroke-dasharray:3}#mermaid-svg-OROFWpBsklGtNkaQ .edge-pattern-dotted{stroke-dasharray:2}#mermaid-svg-OROFWpBsklGtNkaQ .marker{fill:#333}#mermaid-svg-OROFWpBsklGtNkaQ .marker.cross{stroke:#333} :root { --mermaid-font-family: "trebuchet ms", verdana, arial;}</style> <style>#mermaid-svg-OROFWpBsklGtNkaQ { color: rgba(0, 0, 0, 0.75); font: ; }</style>

<p>id%2&#x3D;1</p>
<p>id%2&#x3D;0</p>
<p>select * from t_usr where id &#x3D; 1</p>
<p>Database01</p>
<p>select * from t_usr where id &#x3D; 2</p>
<p>Database02</p>
<h2 id="2、两种技术模式的基本介绍"><a href="#2、两种技术模式的基本介绍" class="headerlink" title="2、两种技术模式的基本介绍"></a>2、两种技术模式的基本介绍</h2><h3 id="2-1-分库分表的技术模式"><a href="#2-1-分库分表的技术模式" class="headerlink" title="2.1 分库分表的技术模式"></a>2.1 分库分表的技术模式</h3><p>1）中间件Proxy模式（MyCat）<br>Proxy属于中间层方案，在应用程序和MySQL之间搭建一层Proxy。中间层介于应用程序与数据库间，需要做一次转发，基于JDBC协议转发，例如Mycat<br>2）Client客户端模式（Sharding-JDBC）<br>Client模式属于客户端直连方案。此方案的优势在于轻便，对兼容性、性能以及DBA影响小。 例如当当网的sharding-jdbc，阿里的TDDL</p>
<h3 id="2-1-Sharding-JDBC"><a href="#2-1-Sharding-JDBC" class="headerlink" title="2.1 Sharding-JDBC"></a>2.1 Sharding-JDBC</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_28809019/article/details/119270399">Sharding-JDBC的基本使用总结</a></p>
<h3 id="2-2-MyCat"><a href="#2-2-MyCat" class="headerlink" title="2.2 MyCat"></a>2.2 MyCat</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_28809019/article/details/119270468">MyCat的基本使用总结</a></p>
<h2 id="3、数据库表结构的自动生成"><a href="#3、数据库表结构的自动生成" class="headerlink" title="3、数据库表结构的自动生成"></a>3、数据库表结构的自动生成</h2><h3 id="3-1为什么要使用数据表自动生成"><a href="#3-1为什么要使用数据表自动生成" class="headerlink" title="3.1为什么要使用数据表自动生成"></a>3.1为什么要使用数据表自动生成</h3><p>在实际业务中譬如日志表，我们希望每月的日志表分开，每当下一个月创建一个新的日志表，这样既可以分担数据库压力，又可以进行分类便于查找。<br>此时我们就需要用到Freemarker模板引擎技术来解决数据库表的自动生成。</p>
<h3 id="3-2-Freemarker的基本使用"><a href="#3-2-Freemarker的基本使用" class="headerlink" title="3.2 Freemarker的基本使用"></a>3.2 Freemarker的基本使用</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_28809019/article/details/119270784">Freemarker的基本使用</a></p>
<h3 id="3-3-表结构自动生成步骤"><a href="#3-3-表结构自动生成步骤" class="headerlink" title="3.3 表结构自动生成步骤"></a>3.3 表结构自动生成步骤</h3><p>1）分析建表语句，提炼数据类型</p>
<p>2）使用工具类：GenerateSqlUtils，生成sql文件</p>
<p>3）在src&#x2F;main&#x2F;resources&#x2F;ftl目录下创建模板文件如：sql.ftl</p>
<p>4）改造模板文件<br>对于变化位置，相应填充变量即可结果如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span>#list <span class="number">0.</span>.sqlbean.db_count<span class="number">-1</span> <span class="keyword">as</span> db_no<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">DROP</span> database if <span class="keyword">exists</span> `chongba_schedule$&#123;db_no&#125;`;</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE `chongba_schedule$&#123;db_no&#125;` <span class="keyword">DEFAULT</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8;</span><br><span class="line">USE `chongba_schedule$&#123;db_no&#125;`;</span><br><span class="line">​</span><br><span class="line"><span class="operator">&lt;</span>#list <span class="number">0.</span>.sqlbean.taskinfo_count<span class="number">-1</span> <span class="keyword">as</span> taskinfo_no<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `taskinfo_$&#123;taskinfo_no&#125;` (</span><br><span class="line">`task_id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>    comment <span class="string">&#x27;任务id&#x27;</span>,</span><br><span class="line">`execute_time` datetime(<span class="number">3</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> comment <span class="string">&#x27;执行时间&#x27;</span>,</span><br><span class="line">`parameters` longblob   comment <span class="string">&#x27;参数&#x27;</span>,</span><br><span class="line">`priority` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>      comment <span class="string">&#x27;优先级&#x27;</span>,</span><br><span class="line">`task_type` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>     comment <span class="string">&#x27;任务类型&#x27;</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (`task_id`),</span><br><span class="line">KEY `index_taskinfo_time` (`task_type`,`priority`,`execute_time`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span>#list<span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&lt;</span>#list sqlbean.taskinfo_logs_monthList <span class="keyword">as</span> <span class="keyword">month</span><span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `taskinfo_logs_$&#123;<span class="keyword">month</span>&#125;` (</span><br><span class="line">`task_id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;任务id&#x27;</span>,</span><br><span class="line">`execute_time` datetime(<span class="number">3</span>) COMMENT <span class="string">&#x27;执行时间&#x27;</span>,</span><br><span class="line">`parameters` longblob  COMMENT <span class="string">&#x27;参数&#x27;</span>,</span><br><span class="line">`priority` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;优先级&#x27;</span>,</span><br><span class="line">`task_type` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;任务类型&#x27;</span>,</span><br><span class="line">`version` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;版本号,用乐观锁&#x27;</span>,</span><br><span class="line">`status` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;状态 0=初始化状态 1=EXECUTED 2=CANCELLED&#x27;</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (`task_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span>#list<span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span>#list<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<p>4）对应yaml配置文件进行修改</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-07-28T05:36:38.000Z" title="2021/7/28 下午1:36:38">2021-07-28</time>发表</span><span class="level-item"><time dateTime="2022-04-17T03:05:11.545Z" title="2022/4/17 上午11:05:11">2022-04-17</time>更新</span><span class="level-item">7 分钟读完 (大约1091个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/07/28/docker-compose%E5%91%BD%E4%BB%A4%E4%B8%8E%E6%93%8D%E4%BD%9C/">docker-compose命令与操作</a></h1><div class="content"><span id="more"></span>

<h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>docker-compose命令与操作</p>
<ul>
<li><ul>
<li><a href="#dockercompose_1">一、docker-compose主要基本命令</a></li>
<li><a href="#dockercompose_84">二、docker-compose基本命令模板</a></li>
<li><a href="#dockercompose_build_151">三、docker-compose build指令</a></li>
<li><a href="#dockercompose__167">四、docker-compose 指令</a></li>
<li><a href="#docker_portainer_240">五、docker可视化工具 portainer</a></li>
</ul>
</li>
</ul>
<h2 id="一、docker-compose主要基本命令"><a href="#一、docker-compose主要基本命令" class="headerlink" title="一、docker-compose主要基本命令"></a>一、docker-compose主要基本命令</h2><p><strong>1）image 指定镜像</strong></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">image:</span> <span class="string">tomcat:8</span> </span><br></pre></td></tr></table></figure>

<p><strong>2）ports 端口映射</strong></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ports:</span> <span class="comment">#宿主机：容器</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;8080:8080&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>3）volumes 挂载数据卷</strong></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">volumes:</span></span><br><span class="line">    <span class="comment">#- /root/webapp:/root/web</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">tomcat:/root/web</span></span><br></pre></td></tr></table></figure>

<p>注意：挂载数据卷，若不是写的宿主机绝对路径，要在下面写上定义目录。<br>若使用自定义数据卷，还有通过external，来表示为true，并提前创建好目录</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">volumes:</span> <span class="comment">#定义目录 在之前加入项目名字</span></span><br><span class="line">	<span class="attr">tomcat:</span></span><br><span class="line">		<span class="attr">external:</span> <span class="comment">#使用自定义卷名 提前创建目录</span></span><br><span class="line">			<span class="literal">true</span> </span><br></pre></td></tr></table></figure>

<p><strong>4）networks 指定网桥</strong></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">networks:</span> <span class="comment"># 指定网桥</span></span><br><span class="line">	<span class="string">-ems</span></span><br></pre></td></tr></table></figure>

<p><strong>5）container-name 指定容器名称</strong></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">container-name:</span> <span class="string">mysql</span></span><br></pre></td></tr></table></figure>

<p><strong>6）command 覆盖容器默认命令</strong><br>覆盖容器内容的默认命令 CMD的命令</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">command:</span> <span class="string">&quot;redis-server --appendonly yes&quot;</span> <span class="comment">#覆盖容器内容的默认命令</span></span><br></pre></td></tr></table></figure>

<p><strong>7）environment 指定变量环境</strong><br>如指定mysql登录密码</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">environment:</span> </span><br><span class="line">     <span class="bullet">-</span> <span class="string">MYSQL_ROOT_PASSWORD=root</span></span><br></pre></td></tr></table></figure>

<p><strong>8）env_file 从文件中获取变量</strong><br>将6里面的MYSQL_ROOT_PASSWORD&#x3D;root 可以写到配置文件中 如secrect.env，使得从配置文件中读取环境变量，解耦合。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">env_file :</span> </span><br><span class="line">	<span class="bullet">-</span> <span class="string">./webapps/secrect.env</span></span><br></pre></td></tr></table></figure>

<p><strong>9）depend_on 依赖容器</strong><br>一个容器依赖其他容器，这样先启动其他容器。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">depend_on :</span> </span><br><span class="line">	<span class="bullet">-</span> <span class="string">db</span>  <span class="comment">#写服务id</span></span><br><span class="line">	<span class="bullet">-</span> <span class="string">redis</span></span><br><span class="line">	<span class="bullet">-</span> <span class="string">tomcat</span></span><br></pre></td></tr></table></figure>

<p><strong>10）healthcheck 健康检查</strong><br>容器运行状态进行检查</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在1m30s内 超时时间10s 重试3次</span></span><br><span class="line"><span class="attr">healthcheck :</span> </span><br><span class="line">	<span class="attr">test:</span> [<span class="string">&quot;CMD&quot;</span>,<span class="string">&quot;curl&quot;</span>,<span class="string">&quot;-f&quot;</span>,<span class="string">&quot;http://localhost&quot;</span>]</span><br><span class="line">	<span class="attr">interval:</span> <span class="string">1m30s</span></span><br><span class="line">	<span class="attr">timeout:</span> <span class="string">10s</span></span><br><span class="line">	<span class="attr">retries:</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>

<p><strong>11）sysctls 配置容器内核参数</strong></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sysctls:</span> </span><br><span class="line">	<span class="attr">net.core.somaxconn:</span> <span class="number">1024</span></span><br><span class="line">	<span class="attr">net.ipv4.tcp_syncookies:</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p><strong>12）ulimits 指定容器进程数</strong></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ulimits:</span> </span><br><span class="line">	<span class="attr">nproc:</span> <span class="number">65535</span></span><br><span class="line">	<span class="attr">nofile:</span></span><br><span class="line">		<span class="attr">soft:</span> <span class="number">20000</span></span><br><span class="line">		<span class="attr">hard:</span> <span class="number">40000</span></span><br></pre></td></tr></table></figure>

<h2 id="二、docker-compose基本命令模板"><a href="#二、docker-compose基本命令模板" class="headerlink" title="二、docker-compose基本命令模板"></a>二、docker-compose基本命令模板</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up </span><br></pre></td></tr></table></figure>

<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">tomcat:</span> <span class="comment">#服务id唯一</span></span><br><span class="line">   <span class="attr">container-name:</span> <span class="string">tomcat</span> </span><br><span class="line">   <span class="attr">image:</span> <span class="string">tomcat:8</span> <span class="comment">#创建当前服务所使用的镜像</span></span><br><span class="line">   <span class="attr">ports:</span> <span class="comment">#宿主机：容器</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;8080:8080&quot;</span></span><br><span class="line">   <span class="attr">volumes:</span></span><br><span class="line">    <span class="comment">#- /root/webapp:/root/web</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">tomcat:/root/web</span></span><br><span class="line">   <span class="attr">networks:</span> <span class="comment"># 指定网桥</span></span><br><span class="line">   	<span class="string">-ems</span></span><br><span class="line">   	</span><br><span class="line">  <span class="attr">tomcat02:</span> <span class="comment">#服务名唯一</span></span><br><span class="line">   <span class="attr">container-name:</span> <span class="string">tomcat</span> <span class="comment">#指定容器名字</span></span><br><span class="line">   <span class="attr">image:</span> <span class="string">tomcat:8</span> <span class="comment">#创建当前服务所使用的镜像</span></span><br><span class="line">   <span class="attr">ports:</span> <span class="comment">#宿主机：容器</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;8081:8080&quot;</span></span><br><span class="line">   <span class="attr">volumes:</span></span><br><span class="line">    <span class="comment">#- /root/webapp:/root/web</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">tomcat02:/root/web</span></span><br><span class="line">   <span class="attr">networks:</span></span><br><span class="line">   	<span class="string">-ems</span>  	</span><br><span class="line"> </span><br><span class="line">  <span class="attr">mysql:</span></span><br><span class="line">  	<span class="attr">image:</span> <span class="string">mysql:5.7</span></span><br><span class="line">	<span class="attr">container-name:</span> <span class="string">mysql</span></span><br><span class="line">	<span class="attr">ports:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;3306:3306&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">mysqldata:/var/lib/mysql</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">mysqlconf:/etc/mysql</span></span><br><span class="line">    <span class="attr">environment:</span> </span><br><span class="line">     <span class="bullet">-</span> <span class="string">MYSQL_ROOT_PASSWORD=root</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">		<span class="string">hello</span></span><br><span class="line"></span><br><span class="line"> <span class="attr">redis:</span></span><br><span class="line">  	<span class="attr">image:</span> <span class="string">redis:5.0.10</span></span><br><span class="line">	<span class="attr">container-name:</span> <span class="string">redis</span></span><br><span class="line">	<span class="attr">ports:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;6379:6379&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">redisdata:/data</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">		<span class="string">hello</span></span><br><span class="line">	<span class="attr">command:</span> <span class="string">&quot;redis-server --appendonly yes&quot;</span> <span class="comment">#覆盖容器内容的默认命令</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span> <span class="comment">#定义目录 在之前加入项目名字</span></span><br><span class="line">	<span class="attr">tomcat:</span></span><br><span class="line">		<span class="attr">external:</span> <span class="comment">#使用自定义卷名 提前创建目录</span></span><br><span class="line">			<span class="literal">true</span> </span><br><span class="line">    <span class="attr">tomcat02:</span></span><br><span class="line">    <span class="attr">mysqldata:</span></span><br><span class="line">    <span class="attr">mysqlconf:</span></span><br><span class="line">    <span class="attr">redisdata:</span></span><br><span class="line">    </span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">	<span class="string">hello</span></span><br><span class="line">	<span class="attr">external:</span> <span class="comment">#使用自定义网桥 提前创建网桥</span></span><br><span class="line">			<span class="literal">true</span> </span><br></pre></td></tr></table></figure>

<h2 id="三、docker-compose-build指令"><a href="#三、docker-compose-build指令" class="headerlink" title="三、docker-compose build指令"></a>三、docker-compose build指令</h2><p>作用：指定dockerfile 打包对应的镜像</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">demo:</span></span><br><span class="line">	<span class="attr">build:</span> <span class="comment">#先根据dockerfile 创建镜像</span></span><br><span class="line">		<span class="attr">context:</span> <span class="string">./demo</span> <span class="comment">#指定上下文目录 当前目录</span></span><br><span class="line">		<span class="attr">context:</span> <span class="string">/usr/local/demo</span>  <span class="comment">#指定上下文目录</span></span><br><span class="line">		<span class="attr">dockerfil:</span> <span class="string">Dockerfile</span></span><br><span class="line">	<span class="attr">container_name:</span> <span class="string">demo</span></span><br><span class="line">	<span class="attr">ports:</span></span><br><span class="line">	 <span class="number">-8080</span><span class="string">:8080</span></span><br><span class="line">	<span class="attr">networks:</span></span><br><span class="line">		<span class="string">-ems</span></span><br><span class="line">	<span class="attr">depend_on:</span></span><br><span class="line">		<span class="string">-tomcat</span></span><br></pre></td></tr></table></figure>

<h2 id="四、docker-compose-指令"><a href="#四、docker-compose-指令" class="headerlink" title="四、docker-compose 指令"></a>四、docker-compose 指令</h2><p><strong>1）up</strong></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">docker-compose</span> <span class="string">-f</span> <span class="string">xxx</span> <span class="string">up</span></span><br><span class="line"><span class="string">-f</span> <span class="string">指定文件名</span></span><br><span class="line"><span class="string">-p</span> <span class="string">指定项目名称</span> <span class="string">在创建数据卷什么的基于该名</span></span><br><span class="line"><span class="string">-verbose</span> <span class="string">输出调试信息</span></span><br></pre></td></tr></table></figure>

<p><strong>2）down</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose down # 移除容器 并移除网络和容器内部数据卷        </span><br></pre></td></tr></table></figure>

<p><strong>3）restart</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker-compose restart [指定容器名]</span><br><span class="line">-t 指定超时时间  </span><br></pre></td></tr></table></figure>

<p><strong>4）rm</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker-compose rm [指定容器名]</span><br><span class="line">-f 强制删除 </span><br><span class="line">-v 删除挂载卷 </span><br></pre></td></tr></table></figure>

<p><strong>5）stop</strong></p>
<p><strong>6）top 查看容器运行进程</strong></p>
<p><strong>7）pause&#x2F;unpause</strong><br>暂停服务 &#x2F; 恢复出于暂停状态中的服务</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">build              Build or rebuild services</span><br><span class="line">bundle             Generate a Docker bundle from the Compose file</span><br><span class="line">config             Validate and view the Compose file</span><br><span class="line">create             Create services</span><br><span class="line">down               Stop and remove containers, networks, images, and volumes</span><br><span class="line">events             Receive real time events from containers</span><br><span class="line">exec               Execute a command in a running container</span><br><span class="line">help               Get help on a command</span><br><span class="line">images             List images</span><br><span class="line">kill               Kill containers</span><br><span class="line">logs               View output from containers</span><br><span class="line">pause              Pause services</span><br><span class="line">port               Print the public port for a port binding</span><br><span class="line">ps                 List containers</span><br><span class="line">pull               Pull service images</span><br><span class="line">push               Push service images</span><br><span class="line">restart            Restart services</span><br><span class="line">rm                 Remove stopped containers</span><br><span class="line">run                Run a one-off command</span><br><span class="line">scale              Set number of containers for a service</span><br><span class="line">start              Start services</span><br><span class="line">stop               Stop services</span><br><span class="line">top                Display the running processes</span><br><span class="line">unpause            Unpause services</span><br><span class="line">up                 Create and start containers</span><br></pre></td></tr></table></figure>

<p>=&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">links:</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">app</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">./nginx/conf.d:/etc/nginx/conf.d</span></span><br><span class="line"> <span class="attr">app:</span></span><br><span class="line">   <span class="attr">image:</span> <span class="string">app</span></span><br><span class="line">   <span class="attr">expose:</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">&quot;8080&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="五、docker可视化工具-portainer"><a href="#五、docker可视化工具-portainer" class="headerlink" title="五、docker可视化工具 portainer"></a>五、docker可视化工具 portainer</h2><p><strong>启动</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run -d </span><br><span class="line">		-p 8000:8000</span><br><span class="line">		-p 9000:9000</span><br><span class="line">		--name=protainer</span><br><span class="line">		--restart=alw ays #只要停止就重启</span><br><span class="line">		-v /var/run/docker.sock:/var/run/docker.sock</span><br><span class="line">		-v portainer_data:/data</span><br><span class="line">		portainer/portainer</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8000:8000 -p 9000:9000 --name=protainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v /usr/local/portainer_data:/data portainer/portainer</span><br></pre></td></tr></table></figure></div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/2/">上一页</a></div><div class="pagination-next"><a href="/page/4/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><a class="pagination-link" href="/page/2/">2</a></li><li><a class="pagination-link is-current" href="/page/3/">3</a></li><li><a class="pagination-link" href="/page/4/">4</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/11/">11</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/per/touxiang.JPG" alt="Mu Yan"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Mu Yan</p><p class="is-size-6 is-block">慕言手记</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>BeiJing</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">103</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">73</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ppoffice" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/muyanshouji"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://blog.csdn.net/sinat_28809019" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">csdn</span></span><span class="level-right"><span class="level-item tag">blog.csdn.net</span></span></a></li><li><a class="level is-mobile" href="https://github.com/muyanshouji" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">github</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Java%E5%9F%BA%E7%A1%80/"><span class="level-start"><span class="level-item">Java基础</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/jvm/"><span class="level-start"><span class="level-item">jvm</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/"><span class="level-start"><span class="level-item">中间件</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="level-start"><span class="level-item">数据库</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/"><span class="level-start"><span class="level-item">编程工具使用总结</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/"><span class="level-start"><span class="level-item">遇到的问题</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/"><span class="level-start"><span class="level-item">面试总结</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-04-16T09:33:28.101Z">2022-04-16</time></p><p class="title"><a href="/2022/04/16/hello-world/">第一次搭建博客</a></p><p class="categories"><a href="/categories/Java%E5%9F%BA%E7%A1%80/">Java基础</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-04-11T06:44:35.000Z">2022-04-11</time></p><p class="title"><a href="/2022/04/11/MySQL%E4%B8%AD%E7%9A%84%E9%94%81/">MySQL中的锁</a></p><p class="categories"><a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-12-28T09:15:50.000Z">2021-12-28</time></p><p class="title"><a href="/2021/12/28/CAS%E4%B8%8Esynchronized/">CAS与synchronized</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-11-23T03:23:00.000Z">2021-11-23</time></p><p class="title"><a href="/2021/11/23/postgresql%20%E4%B8%8E%20mysql%20%E5%8C%BA%E5%88%AB%E4%B8%8E%E8%81%94%E7%B3%BB/">postgresql 与 mysql 区别与联系</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-09-10T11:14:47.000Z">2021-09-10</time></p><p class="title"><a href="/2021/09/10/%E8%8E%B7%E5%8F%96JSONObject%E4%B8%AD%E6%B7%B1%E5%B1%82%E5%B5%8C%E5%A5%97%E7%9A%84key_value/">获取JSONObject中深层嵌套的key_value</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">四月 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">十二月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/11/"><span class="level-start"><span class="level-item">十一月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/09/"><span class="level-start"><span class="level-item">九月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">八月 2021</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">七月 2021</span></span><span class="level-end"><span class="level-item tag">44</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">六月 2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">五月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">四月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/03/"><span class="level-start"><span class="level-item">三月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/02/"><span class="level-start"><span class="level-item">二月 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/01/"><span class="level-start"><span class="level-item">一月 2021</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/04/"><span class="level-start"><span class="level-item">四月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/01/"><span class="level-start"><span class="level-item">一月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">十二月 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Java-%E5%AD%A6%E4%B9%A0/"><span class="tag">Java 学习</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/consul/"><span class="tag">consul</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker/"><span class="tag">docker</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-linux-centos-java/"><span class="tag">docker linux centos java</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dokcer/"><span class="tag">dokcer</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/idea/"><span class="tag">idea</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java/"><span class="tag">java</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java-aop/"><span class="tag">java aop</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java-date-%E6%97%B6%E9%97%B4-%E6%97%A5%E6%9C%9F-%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="tag">java date 时间 日期 数据库</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java-http/"><span class="tag">java http</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java-java8%E6%96%B0%E7%89%B9%E6%80%A7/"><span class="tag">java java8新特性</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java-mysql-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/"><span class="tag">java mysql 分库分表</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java-session/"><span class="tag">java session</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java-spring-springboot/"><span class="tag">java spring springboot</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java-springboot-MutilpartFile/"><span class="tag">java springboot MutilpartFile</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java-springboot-RestTemplate/"><span class="tag">java springboot RestTemplate</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java-%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80-%E5%90%8E%E7%AB%AF/"><span class="tag">java 开发语言 后端</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java-%E6%95%B0%E6%8D%AE%E5%BA%93-%E5%A4%9A%E7%BA%BF%E7%A8%8B/"><span class="tag">java 数据库 多线程</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java-%E7%BA%BF%E7%A8%8B%E6%B1%A0/"><span class="tag">java 线程池</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java-%E7%BB%93%E6%9E%9C%E9%9B%86/"><span class="tag">java 结果集</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><span class="tag">java 设计模式</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java-socket/"><span class="tag">java  socket</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jdk-linux-tomcat/"><span class="tag">jdk linux tomcat</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jenkins/"><span class="tag">jenkins</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/json-java-%E5%AD%97%E7%AC%A6%E4%B8%B2/"><span class="tag">json java 字符串</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux-java-cpu-%E5%A4%9A%E7%BA%BF%E7%A8%8B-%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%8F%82%E6%95%B0/"><span class="tag">linux java cpu 多线程 线程池参数</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mybatis/"><span class="tag">mybatis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mybatis-java-mysql/"><span class="tag">mybatis java mysql</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mysql/"><span class="tag">mysql</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mysql-freemarker/"><span class="tag">mysql freemarker</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mysql-java/"><span class="tag">mysql java</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mysql-mycat/"><span class="tag">mysql mycat</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mysql-sql-java/"><span class="tag">mysql sql java</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mysql-%E6%95%B0%E6%8D%AE%E5%BA%93-java/"><span class="tag">mysql 数据库 java</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mysql-%E6%95%B0%E6%8D%AE%E5%BA%93-postgresql/"><span class="tag">mysql 数据库 postgresql</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mysql-%E6%95%B0%E6%8D%AE%E5%BA%93-sql/"><span class="tag">mysql 数据库 sql</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mysql-%E7%B4%A2%E5%BC%95/"><span class="tag">mysql 索引</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mysql-%E9%94%81-%E8%A1%A8%E9%94%81-%E8%A1%8C%E9%94%81/"><span class="tag">mysql 锁 表锁 行锁</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/neo4j/"><span class="tag">neo4j</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/poi-excel/"><span class="tag">poi excel</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/postgresql-linux/"><span class="tag">postgresql linux</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/postman/"><span class="tag">postman</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/restTemplate-java-springboot-postman/"><span class="tag">restTemplate java springboot postman</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ribbon-consul-stream-springcloud/"><span class="tag">ribbon consul stream springcloud</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rocketmq/"><span class="tag">rocketmq</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/servlet-tomcat/"><span class="tag">servlet tomcat</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sonarqube/"><span class="tag">sonarqube</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spring-boot/"><span class="tag">spring boot</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spring-boot-application/"><span class="tag">spring boot application</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spring-boot-exception/"><span class="tag">spring boot exception</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spring-%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="tag">spring 数据库</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/springboot/"><span class="tag">springboot</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tomcat/"><span class="tag">tomcat</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BA%8C%E5%8F%89%E6%A0%91-java-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="tag">二叉树 java 数据结构</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95-%E6%8B%A6%E6%88%AA%E5%99%A8/"><span class="tag">单元测试 拦截器</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"><span class="tag">多线程</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B-java/"><span class="tag">多线程 java</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F-%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95-java-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="tag">快速排序 排序算法 java 数据结构</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%8A%BD%E8%B1%A1%E7%B1%BB-java-%E7%B1%BB-final/"><span class="tag">抽象类 java 类 final</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95-leetcode/"><span class="tag">排序算法 leetcode</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="tag">数据结构</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-c%E8%AF%AD%E8%A8%80/"><span class="tag">数据结构 c语言</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95-%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F-%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/"><span class="tag">数据结构 排序算法 插入排序 快速排序</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%A0%88-java/"><span class="tag">数据结构 栈 java</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E9%98%9F%E5%88%97-%E6%A0%88/"><span class="tag">数据结构 队列 栈</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AC%A6%E5%8F%B7%E8%A1%A8-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-java/"><span class="tag">符号表 数据结构 java</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BD%91%E7%BB%9C/"><span class="tag">网络</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-java/"><span class="tag">设计模式 java</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%93%BE%E8%A1%A8-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="tag">链表 数据结构</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%93%BE%E8%A1%A8-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-leetcode/"><span class="tag">链表 数据结构 leetcode</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%98%9F%E5%88%97/"><span class="tag">队列</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9D%A2%E8%AF%95-java/"><span class="tag">面试 java</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="慕言手记" height="28"></a><p class="is-size-7"><span>&copy; 2022 Mu Yan</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><script src="/js/night.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>